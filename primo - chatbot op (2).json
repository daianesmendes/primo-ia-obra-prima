{
  "name": "Primo - Public Template",
  "nodes": [
    {
      "parameters": {},
      "type": "n8n-nodes-base.limit",
      "typeVersion": 1,
      "position": [
        1296,
        1632
      ],
      "id": "caf72e76-0af3-4748-9d62-0ecc4cc0854b",
      "name": "Limit"
    },
    {
      "parameters": {
        "jsCode": "// Normaliza deixando só números\nconst original = $json.phone.replace(/\\D/g, \"\");\n\n// Se começar com 55, mantemos, senão adicionamos\nconst base = original.startsWith(\"55\") ? original : `55${original}`;\n\nlet com9 = base;\nlet sem9 = base;\n\n// Se tem 12 dígitos → sem nono dígito → adicionamos 9\nif (base.length === 12) {\n  com9 = base.slice(0, 4) + \"9\" + base.slice(4);\n}\n\n// Se tem 13 dígitos → com nono dígito → removemos o 9\nif (base.length === 13) {\n  sem9 = base.slice(0, 4) + base.slice(5);\n}\n\nreturn [\n  {\n    json: {\n      original: original,\n      comNonoDigito: com9,\n      semNonoDigito: sem9,\n      temNonoDigito: com9.length === 13,\n      params: [com9, sem9]   // ← OBRIGATÓRIO\n    }\n  }\n];\n"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        592,
        1632
      ],
      "id": "e91c4553-936d-407b-946c-9a3ca3d5fefe",
      "name": "Nono Dígito"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-5.2",
          "mode": "list",
          "cachedResultName": "gpt-5.2"
        },
        "options": {
          "temperature": 0.2,
          "topP": 0.1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.2,
      "position": [
        -3840,
        -1168
      ],
      "id": "6e8859f2-fdde-40f3-8579-96868b1d9d0d",
      "name": "OpenAI Chat Model1"
    },
    {
      "parameters": {
        "path": "get_obras",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        3072,
        -800
      ],
      "id": "c39fef98-dc80-4000-a0bd-f2f734015eaa",
      "name": "GET obras",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        3744,
        -800
      ],
      "id": "4cf302df-a295-4ef6-a572-8482a3b1797a",
      "name": "Respond to Webhook"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        3744,
        0
      ],
      "id": "dcfe76ef-b0a7-413e-86d6-acc05ec968e0",
      "name": "Respond to Webhook2"
    },
    {
      "parameters": {
        "path": "get_solicitacoes_by_user",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        3072,
        0
      ],
      "id": "26605604-464b-4fa1-a670-5290cd2bbdfc",
      "name": "GET Solicitações - by User",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "receive-whats-primo",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -5536,
        1008
      ],
      "id": "9f75cda6-4fc1-4477-a35f-1040cb064d97",
      "name": "Webhook",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "6c6cf162-0cb8-4485-bd97-76a1c31136ef",
              "leftValue": "={{ $('Campos Whatsapp').item.json.body.text.message }}",
              "rightValue": "",
              "operator": {
                "type": "string",
                "operation": "exists",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -1264,
        1664
      ],
      "id": "676092ae-5c6c-47d6-a872-3a4df3cadb10",
      "name": "If tem Message"
    },
    {
      "parameters": {
        "operation": "set",
        "key": "={{ $json.body.connectedPhone }}_{{ $json.body.phone }}_block",
        "value": "true",
        "expire": true,
        "ttl": 300
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -4976,
        864
      ],
      "id": "34b1018f-277f-456a-a6c9-6c0d110e1987",
      "name": "chave block",
      "notesInFlow": true,
      "notes": "Bloqueia por 5 minutos"
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "isBlocked",
        "key": "={{ $json.body.connectedPhone }}_{{ $json.body.phone }}_block",
        "options": {}
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -4976,
        1168
      ],
      "id": "f9df59dc-5035-420a-b715-0b0644ab9a84",
      "name": "Get isBlocked?"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "f0198f80-5141-426b-bfc7-a3e183a31959",
                    "leftValue": "={{ $json.body.text.message }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Mensagem"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.image.imageUrl }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "id": "fc29a2b8-c40d-4f5f-affa-272828c0048a"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Imagem"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "746e0c20-69c0-4c03-b001-8297e3b83cbd",
                    "leftValue": "={{ $json.body.audio.audioUrl }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Audio"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "528995d0-b2fd-4359-90e5-f932e683356d",
                    "leftValue": "={{ $json.body.document.documentUrl }}",
                    "rightValue": "",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Documento"
            }
          ]
        },
        "options": {
          "ignoreCase": true,
          "allMatchingOutputs": true
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -4224,
        1120
      ],
      "id": "c621330b-f2c1-4b35-b097-e934b7c57261",
      "name": "Switch1",
      "executeOnce": false
    },
    {
      "parameters": {
        "url": "={{ $json.body.audio.audioUrl }}",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -3568,
        1712
      ],
      "id": "fcf4f30b-c7d6-4b0d-9ab2-27aab604dacd",
      "name": "Download audio"
    },
    {
      "parameters": {
        "resource": "audio",
        "operation": "transcribe",
        "binaryPropertyName": "=data",
        "options": {
          "language": "pt"
        }
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 1.8,
      "position": [
        -3328,
        1712
      ],
      "id": "d1080a18-ec99-4920-be71-f844bfec2103",
      "name": "Transcreve Audio"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "34f779fd-a0c8-4cb1-8109-b221cc35098e",
              "name": "body.phone",
              "value": "={{ (() => {\n    // Número original\n    let cel = $('Webhook').item.json.body.phone ?? '';\n\n    // Mantém só dígitos\n    cel = cel.replace(/\\D/g, '');\n\n    // Se vier com 12 dígitos (55 + DDD + 8 dígitos), insere o “9”\n    if (cel.length === 12) {\n        cel = cel.slice(0, 4) + '9' + cel.slice(4);  // 55XX + 9 + resto\n    }\n\n    return cel;   // Ex.: 55DD9XXXXXXXX\n})() }}",
              "type": "string"
            },
            {
              "id": "b3ddb96d-e9b5-451a-a8bd-83354dc8d31c",
              "name": "body.connectedPhone",
              "value": "={{ $('Webhook').item.json.body.connectedPhone }}",
              "type": "string"
            },
            {
              "id": "1035037f-632f-4a44-85a9-76ed912373a6",
              "name": "body.fromMe",
              "value": "={{ $('Webhook').item.json.body.fromMe }}",
              "type": "boolean"
            },
            {
              "id": "54439277-4355-438b-a957-2a71e3e180be",
              "name": "body.status",
              "value": "={{ $('Webhook').item.json.body.status }}",
              "type": "string"
            },
            {
              "id": "6572c2f3-fe3b-4aa3-b71d-dc360363662e",
              "name": "body.chatName",
              "value": "={{ $('Webhook').item.json.body.chatName }}",
              "type": "string"
            },
            {
              "id": "88687d4b-e00b-41c5-8a2a-6f4b38a99055",
              "name": "body.notification",
              "value": "={{ $('Webhook').item.json.body.notification }}",
              "type": "string"
            },
            {
              "id": "eb1c0592-0d83-4dc6-a693-0ad716ded6b9",
              "name": "body.text.message",
              "value": "={{ $json.content }}",
              "type": "string"
            },
            {
              "id": "117fa022-04db-4cc2-95cf-aad89ee1a9b0",
              "name": "body.messageId",
              "value": "={{ $('Webhook').item.json.body.messageId }}",
              "type": "string"
            },
            {
              "id": "3705634e-f10b-4317-9cb1-2f0eaf9289d8",
              "name": "body.momment",
              "value": "={{ $('Webhook').item.json.body.momment }}",
              "type": "number"
            },
            {
              "id": "a79fa382-c221-4d18-9e00-9225de0f6a03",
              "name": "body.fromApi",
              "value": "={{ $('Webhook').item.json.body.fromApi }}",
              "type": "boolean"
            },
            {
              "id": "f33baae9-172f-41a9-9010-3643d3388997",
              "name": "canal",
              "value": "=Whatsapp",
              "type": "string"
            },
            {
              "id": "e4546843-0d6c-4b2b-b3ac-b01d1735866a",
              "name": "=sessionId",
              "value": "={{ $('Webhook').item.json.body.phone }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -1504,
        1664
      ],
      "id": "ee36754a-b0a2-4121-a16a-e8e37f813f44",
      "name": "Campos Whatsapp"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "ab1921aa-0a37-43dd-b8b5-c213a3274a79",
              "name": "chatInput",
              "value": "={{ $json.chatInput }}",
              "type": "string"
            },
            {
              "id": "a8239224-2f88-4d55-a644-b5356b08fd97",
              "name": "phone",
              "value": "={{ $json.phone?.toString().replace(/^55/, '') }}",
              "type": "string"
            },
            {
              "id": "0d4e620a-eaf5-46bf-b81b-85c1650cfd74",
              "name": "canal",
              "value": "={{ $json.canal }}",
              "type": "string"
            },
            {
              "id": "c65d0df5-ae3b-4f5d-b911-2ae370e7a7a2",
              "name": "sessionId",
              "value": "={{ $json.sessionId }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        352,
        1632
      ],
      "id": "0094be9f-5caa-4611-9c52-9dedbc43107c",
      "name": "Chat | Whats"
    },
    {
      "parameters": {
        "amount": 20
      },
      "type": "n8n-nodes-base.wait",
      "typeVersion": 1.1,
      "position": [
        -816,
        1648
      ],
      "id": "572f4e56-3d5a-4ad7-b515-e430c24fef9d",
      "name": "Wait3",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "operation": "get",
        "propertyName": "=messages",
        "key": "={{ $('If tem Message').item.json.body.phone }}_buffer",
        "options": {}
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -592,
        1648
      ],
      "id": "86851a0e-68a3-444a-b340-9a4047072dd6",
      "name": "get messages buffer2"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "d8b5d0d4-b5ac-4534-98e9-326ca251c722",
              "leftValue": "={{ $json.messages.length > 0 }}",
              "rightValue": "={{ $('Campos Whatsapp').item.json.body.messageId }}",
              "operator": {
                "type": "boolean",
                "operation": "true",
                "singleValue": true
              }
            }
          ],
          "combinator": "and"
        },
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -352,
        1648
      ],
      "id": "ce841c4e-5e2d-4a07-bd49-804d24603927",
      "name": "If sem novas msgs"
    },
    {
      "parameters": {
        "operation": "delete",
        "key": "={{ $('If tem Message').item.json.body.phone }}_buffer"
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        112,
        1632
      ],
      "id": "1c831b66-36cf-4f64-b89c-cc170c193128",
      "name": "Redis1"
    },
    {
      "parameters": {
        "operation": "push",
        "list": "={{ $('If tem Message').item.json.body.phone }}_buffer",
        "messageData": "={{ $json.body.text.message }}",
        "tail": true
      },
      "type": "n8n-nodes-base.redis",
      "typeVersion": 1,
      "position": [
        -1040,
        1648
      ],
      "id": "18d8a6ab-90b9-4126-8062-a92871900f29",
      "name": "Push Buffer1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "22b046fa-94db-457e-8290-33f3c9b2b06c",
              "name": "chatInput",
              "value": "={{ $json.messages }}",
              "type": "string"
            },
            {
              "id": "9e4ff2f3-fe98-4957-8f0a-7ca09e06c34b",
              "name": "sessionId",
              "value": "={{ $('Campos Whatsapp').item.json.body.phone }}",
              "type": "string"
            },
            {
              "id": "d96711d5-4742-49d5-b778-99fd07da791a",
              "name": "connectedPhone",
              "value": "={{ $('Campos Whatsapp').item.json.body.connectedPhone }}",
              "type": "string"
            },
            {
              "id": "b5377555-e438-48c9-83dc-9dc5d72fd0dd",
              "name": "canal",
              "value": "Whatsapp",
              "type": "string"
            },
            {
              "id": "ff3cb069-1056-43fb-b94c-f7a1dd930b2f",
              "name": "phone",
              "value": "={{ $('Campos Whatsapp').item.json.body.phone }}",
              "type": "string"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -128,
        1632
      ],
      "id": "d6717a90-2139-46eb-8231-aa29a3e34f65",
      "name": "Msgs Whats"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "39bbfeb3-2b43-4c24-9d2d-b02fd9943ff0",
              "name": "content",
              "value": "={{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3056,
        1712
      ],
      "id": "93592772-4e65-4706-8047-c89c694a5919",
      "name": "Trata Audio"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "39bbfeb3-2b43-4c24-9d2d-b02fd9943ff0",
              "name": "content",
              "value": "={{ $('Webhook').item.json.body.text.message }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3056,
        1104
      ],
      "id": "b7386c67-7571-4fbe-bc81-e48b8ff53555",
      "name": "Trata Mensagem"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.body.fromMe && !$json.body.fromApi }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    },
                    "id": "1354a375-8fc2-4e82-9233-d34a38cb5d19"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Humano Atendente"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "16050682-98d1-4c94-a30d-fca1b321f4bc",
                    "leftValue": "={{ $json.body.fromMe && $json.body.fromApi }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "true",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "BOT"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": true,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "5ad0840e-8537-4d16-8c90-3ddffa46eb87",
                    "leftValue": "={{ $json.body.fromMe }}",
                    "rightValue": "",
                    "operator": {
                      "type": "boolean",
                      "operation": "false",
                      "singleValue": true
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "Cliente"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.2,
      "position": [
        -5248,
        992
      ],
      "id": "70a9911f-544d-4a47-951b-9e3d2c96fc87",
      "name": "Switch2"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "c1d5da82-779a-4671-8c89-9e55XXXXXXXXXXX",
              "name": "body",
              "value": "={{ $('Webhook').item.json.body }}",
              "type": "object"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -4480,
        1152
      ],
      "id": "595a06b1-f2db-40ee-b30f-05e6103ae34a",
      "name": "Dados Webhook"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        3408,
        -800
      ],
      "id": "49a1aedc-7b47-41c7-8910-f0ba069a4554",
      "name": "Microsoft SQL",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        3408,
        0
      ],
      "id": "1c016de7-7c74-4a69-ae51-385380aa9e7b",
      "name": "Microsoft SQL2",
      "executeOnce": false,
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        832,
        1632
      ],
      "id": "90d2c863-b59e-49eb-990c-90b06866fcb4",
      "name": "GET User by Phone",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "toolDescription": "Busca o ID interno e o nome oficial de uma obra no Sistema Obra Prima. Deve ser a primeira ferramenta chamada assim que o usuário mencionar um local ou nome de obra.",
        "url": "https://example.com/webhook/get_obras",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "empresa",
              "value": "={{ $('Agente Solicitações1').item.json.body.matriz }}"
            },
            {
              "name": "usuario",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "nome",
              "value": "={{ $fromAI('parameters2_Value', `nome da obra, termo que será usado para pesquisar`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -4304,
        80
      ],
      "id": "c1541f54-6b71-4659-afa9-55XXXXXXXXXXX",
      "name": "obras1"
    },
    {
      "parameters": {
        "content": "## AGENTE SOLICITAÇÃO\n\n",
        "height": 80,
        "width": 292
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -4768,
        -1168
      ],
      "typeVersion": 1,
      "id": "84dc1f49-aee5-44a6-9e3b-d13441e02f3e",
      "name": "Sticky Note6"
    },
    {
      "parameters": {
        "toolDescription": "Cria o cabeçalho de uma nova solicitação. Requer: id_obra (obtido em obras1), necessidade (ISO: YYYY-MM-DDT00:00:00.000Z) e descricao. SÓ EXECUTAR APÓS CONFIRMAÇÃO DO RESUMO.",
        "method": "POST",
        "url": "https://example.com/api/solicitacoes",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_obra",
              "value": "={{ $fromAI('parameters0_Value', `ID da OBRA colhido na tool \"obras1\".`, 'string') }}"
            },
            {
              "name": "id_usuario",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "necessidade",
              "value": "={{ $fromAI('data_necessidade_material', `data da necessidade do material, no formato: 2021-12-17T10:59:18.803`, 'string') }}"
            },
            {
              "name": "descricao",
              "value": "={{ $fromAI('descricao_solicitacao', `breve descrição da solicitação`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -4704,
        -256
      ],
      "id": "0e5502c4-c6c3-46cd-b420-6339e673606f",
      "name": "criar_solicitacao1"
    },
    {
      "parameters": {
        "toolDescription": "Adiciona itens a uma solicitação existente. Requer: id_solicitacao ( ID INTERNO DA SOLICITAÇÃO, obtido pela tool 'listar_solicitacoes1'), nome do item, quantidade e unidadeMedida.",
        "method": "POST",
        "url": "https://example.com/api/solicitacaoItens/",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_solicitacao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `ID interno da solicitação, consulte na tool 'listar_solicitacoes1'`, 'string') }}"
            },
            {
              "name": "id_usuario",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "nome",
              "value": "={{ $fromAI('nome_item', `nome do item`, 'string') }}"
            },
            {
              "name": "complemento",
              "value": "={{ $fromAI('complemento_item', `complemento do item, como a marca, detalhamento e etc..`, 'string') }}"
            },
            {
              "name": "unidadeMedida",
              "value": "={{ $fromAI('unidade_medida', `Sigla da Unidade de Medida do item, como KG, UN, PCT..`, 'string') }}"
            },
            {
              "name": "quantidade",
              "value": "={{ $fromAI('quantidade', `quantidade do item`, 'number') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -4512,
        -112
      ],
      "id": "3d8e68f1-385d-4ce7-9463-ea1cfe8cdf80",
      "name": "inserir_item_solicitacao1"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        -2528,
        -960
      ],
      "id": "0f656ffd-f2be-4f04-aa0c-b51610a9d274",
      "name": "Respond to Webhook4"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "agente_solicitacao_compra",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        -4784,
        -960
      ],
      "id": "3ddbef39-5e28-43aa-a305-3267b6289cdf",
      "name": "Agente Solicitações1",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "=primo_{{ $json.body.pessoa }}",
        "tableName": "chat_memory",
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        -3616,
        -1168
      ],
      "id": "33b6adf1-5834-4428-b909-55XXXXXXXXXXX",
      "name": "Postgres Memory1"
    },
    {
      "parameters": {
        "toolDescription": "Remove um item específico de uma solicitação. Requer id_item obtido via listar_item_solicitacao.",
        "method": "POST",
        "url": "https://example.com/webhook/excluir_item_solicitacao",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "id_acesso",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_item",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `id do tem a ser excluido, busque na tool 'listar_item_solicitacao.'`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -3840,
        320
      ],
      "id": "ed50896f-dccd-415b-90d3-89ac9065b1df",
      "name": "deletar_item_solicitacao"
    },
    {
      "parameters": {
        "toolDescription": "Lista todos os itens vinculados a uma solicitação específica. Essencial para identificar IDs de itens antes de edições ou exclusões. Requer o ID interno da solicitação - consulte na tool 'listar_solicitacoes1'",
        "method": "POST",
        "url": "https://example.com/webhook/listar_iem_solicitacao",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "tipo",
              "value": "solicitacao"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_solicitacao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `ID INTERNO DA SOLICITAÇÃO, DEVE SER BUSCADO NA TOOL \"listar_solicitacoes1\"`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -4832,
        -496
      ],
      "id": "6c357a97-9866-4984-9bad-6dfb11f4a3a6",
      "name": "listar_item_solicitacao"
    },
    {
      "parameters": {
        "toolDescription": "Recupera a lista de solicitações recentes. Essencial para obter IDs internos quando o usuário se refere a uma solicitação pelo número visual (ex: 000060) ou por termos como 'a última'.\n  \n\"ID\": - ESSE É O ID UTILIZADO PARA AS TOOLS\n1200,\n  \n\"numero\": \n\"000053\", - ESSE É O ID QUE O USUÁRIO TEM ACESSO\n  \n\"observacao\": \n\"solicitação de material teste 2\",\n\n\"dt_necessidade\": \n\"2026-01-01T00:00:00.000Z\",\n\n\"nome_obra\": \n\"Obra da Ma\",\n\n\"empresa\": \n51810,\n\n\"usuario\": \n1084",
        "url": "https://example.com/webhook/get_solicitacoes_by_user",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "empresa",
              "value": "={{ $('Agente Solicitações1').item.json.body.empresa }}"
            },
            {
              "name": "usuario",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -4080,
        208
      ],
      "id": "54ad6ae2-bbc4-4a41-ba6b-ab96914abf38",
      "name": "listar_solicitacoes1"
    },
    {
      "parameters": {
        "toolDescription": "Utilize quando o usuário desejar deletar uma solicitação, requer id da solicitação (interno), verificado na tool 'listar_solicitacoes1'.",
        "method": "POST",
        "url": "https://example.com/webhook/excluir_solicitacao",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "id_solicitacao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters2_Value', `ID interno da solicitação, consulte na tool 'listar_solicitacoes1'`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -3632,
        432
      ],
      "id": "70ddb4c5-4cac-405a-ae9c-73e65f63b9b2",
      "name": "deletar_solicitacao"
    },
    {
      "parameters": {
        "toolDescription": "Edita um item existente (quantidade, unidade ou nome). Requer o payload completo do item para realizar o merge de dados sem apagar campos não editados. ",
        "method": "POST",
        "url": "https://example.com/webhook/editar_item_solicitacao",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_solicitacao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `id interno da solicitação, verifique na tool 'listar_solicitacoes1'`, 'string') }}"
            },
            {
              "name": "id_usuario",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "nome",
              "value": "={{ $fromAI('parameters2_Value', `nome do item`, 'string') }}"
            },
            {
              "name": "quantidade",
              "value": "={{ $fromAI('parameters3_Value', `quantidade do item`, 'string') }}"
            },
            {
              "name": "complemento",
              "value": "={{ $fromAI('parameters4_Value', `complemento, é opcional`, 'string') }}"
            },
            {
              "name": "unidadeMedida",
              "value": "={{ $fromAI('parameters5_Value', `unidade de medida (ex: kg, un, M)`, 'string') }}"
            },
            {
              "name": "id_item",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters6_Value', `Verifique na tool 'listar_item_solicitacao'`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -3200,
        224
      ],
      "id": "f53f76ef-ab25-4d20-a469-3df55ea22e42",
      "name": "atualizar_item_solicitacao"
    },
    {
      "parameters": {
        "toolDescription": "Atualiza o cabeçalho (obra, data ou descrição). Requer merge dos dados atuais com os novos. Envie sempre id_obra (verifique na tool 'obras1'), id_solicitacao (id interno da solicitação, verifique na tool 'listar_solicitacoes1', necessidade e descricao completos.",
        "method": "POST",
        "url": "https://example.com/webhook/editar_solicitacao",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_obra",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `id da obra, verifique o id correto na tool \"obras1\"`, 'string') }}"
            },
            {
              "name": "id_usuario",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "necessidade",
              "value": "={{ $fromAI('parameters2_Value', `data da necessidade do material, no formato: 2021-12-17T10:59:18.803`, 'string') }}"
            },
            {
              "name": "descricao",
              "value": "={{ $fromAI('parameters3_Value', `breve descrição da solicitação`, 'string') }}"
            },
            {
              "name": "id_solicitacao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters4_Value', `id interno da solicitação, verifique na tool 'listar_solicitacoes1'`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -3424,
        336
      ],
      "id": "76bacd71-19da-48fd-8b2a-8415f96c570d",
      "name": "editar_solicitacao"
    },
    {
      "parameters": {
        "toolDescription": "Consulta o status atual (situacao) de uma solicitação específica usando o ID interno da solicitação (consulte na tool 'listar_solicitacoes1'.",
        "method": "POST",
        "url": "https://example.com/webhook/situacao",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "tipo",
              "value": "solicitacao"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_solicitacao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `id interno da solicitação, consulte em 'listar_solicitacoes1'`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -2992,
        112
      ],
      "id": "5ee57f2f-264e-44ef-b261-c765b6fa8154",
      "name": "consultar_situacao"
    },
    {
      "parameters": {
        "toolDescription": "Lista os arquivos e imagens anexados a uma solicitação. Use para identificar qual anexo o usuário deseja visualizar ou excluir.\nVerifique na tool 'listar_solicitacaoes1' o id_solicitacao",
        "method": "POST",
        "url": "https://example.com/webhook/get_anexos",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "tipo",
              "value": "solicitacao"
            },
            {
              "name": "id_solicitacao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters3_Value', `id interno da solicitação, pode-se verificar na toll 'listar_solicitacoes1'`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -2592,
        -192
      ],
      "id": "0b830725-d541-493d-a977-528346fbe406",
      "name": "get_anexos"
    },
    {
      "parameters": {
        "toolDescription": "Remove um anexo específico de uma solicitação usando o ID do anexo obtido em get_anexos. Somente após a confirmação do usuário.",
        "method": "POST",
        "url": "https://example.com/webhook/excluir_imagem_solicitacao",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_anexo",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `ID do anexo obtido na tool get_anexos.`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -2400,
        -384
      ],
      "id": "dcb557e5-de32-4abe-811b-7860b435e24a",
      "name": "deletar_anexo"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": true,
            "leftValue": "",
            "typeValidation": "loose",
            "version": 2
          },
          "conditions": [
            {
              "id": "39dad03d-2739-44dd-9018-b8ecf3017d1f",
              "leftValue": "={{ $('Webhook').item.json.body.phone }}",
              "rightValue": "55XXXXXXXXXXX",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "acbb33d7-a243-44f8-ae44-3bffec8eeaa9",
              "leftValue": "={{ $('Webhook').item.json.body.phone }}",
              "rightValue": "55XXXXXXXXXXX",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            },
            {
              "id": "b30fabc7-d85f-434b-bcb1-8d0879b8f10f",
              "leftValue": "={{ $('Webhook').item.json.body.phone }}",
              "rightValue": "55XXXXXXXXXXX",
              "operator": {
                "type": "string",
                "operation": "equals",
                "name": "filter.operator.equals"
              }
            }
          ],
          "combinator": "or"
        },
        "looseTypeValidation": true,
        "options": {}
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -4736,
        1168
      ],
      "id": "d1e6a0ef-be13-4b60-bf68-64f5a46fb281",
      "name": "Daiane/Maressa/Daniel"
    },
    {
      "parameters": {
        "resource": "image",
        "operation": "analyze",
        "modelId": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "GPT-4O"
        },
        "text": "Você é um assistente de extração de dados de alta precisão para o sistema Obra Prima.\n\nSua missão é realizar a leitura integral (OCR) do documento fornecido. Se a imagem contiver qualquer texto legível, sua tarefa é transcrever EXATAMENTE tudo o que está escrito, sem resumir, sem parafrasear e sem omitir termos.\n\nDIRETRIZES DE EXTRAÇÃO:\n\nFidelidade Total: Transcreva cada linha, título, observação, quantidade, unidade ou código exatamente como aparecem na imagem.\n\nPreservação de Estrutura: Mantenha a organização visual do texto (se estiver em lista, use lista; se houver cabeçalhos, destaque-os).\n\nCaptura de Detalhes: Não ignore informações que pareçam secundárias. Se está escrito, deve ser extraído.\n\nREGRAS DE CLASSIFICAÇÃO:\n\nSe a imagem for um orçamento, lista (manuscrita ou digitada), print de tela, etiqueta ou documento com dados de compra: Extraia o texto completo.\n\nSe a imagem for apenas uma foto de ambiente, objeto sem texto ou totalmente ilegível, responda APENAS: ANEXO.\n\nEXEMPLO DE SAÍDA ESPERADA: \"edita a descrição pra Edição de material e adiciona telhas - 5 unidades\" (Transcreva exatamente assim se for o que estiver na imagem).",
        "imageUrls": "={{ $json.body.image.imageUrl }}",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2,
      "position": [
        -3568,
        1392
      ],
      "id": "8f1b199a-dd10-49b0-b84c-9b6b1f85f007",
      "name": "Analisa imagem - Triagem"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "9ebe9481-a8ea-44f3-929c-686e31ae6e1a",
              "leftValue": "={{ $json['0'].content[0].text }}",
              "rightValue": "ANEXO",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -3328,
        1392
      ],
      "id": "f06cfb0e-c425-4ac7-89c1-4e82e7dbd74a",
      "name": "If"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "408a9072-20bb-4db4-8009-09b4ed0e6f27",
              "name": "content",
              "value": "=Aqui está a URL da imagem a ser anexada: {{ $('Webhook').item.json.body.image.imageUrl }} - {{ $('Dados Webhook').item.json.body.image.caption }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3056,
        1280
      ],
      "id": "8cf17826-2da9-43c7-9744-82d7850dbd9e",
      "name": "URL"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "408a9072-20bb-4db4-8009-09b4ed0e6f27",
              "name": "content",
              "value": "={{ $json['0'].content[0].text }} {{ $('Dados Webhook').item.json.body.image.caption }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3056,
        1504
      ],
      "id": "97addf4f-e5c9-4aa4-b665-de949d3bf6db",
      "name": "Trata imagem"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        -144,
        -960
      ],
      "id": "1ad61fa1-e723-4758-a032-6f9d3c63e48f",
      "name": "Respond to Webhook1"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-5.2",
          "mode": "list",
          "cachedResultName": "gpt-5.2"
        },
        "builtInTools": {},
        "options": {
          "temperature": 0.1,
          "topP": 1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        -1168,
        -1136
      ],
      "id": "41b63803-3ef5-4862-a19d-7ab444b6e718",
      "name": "OpenAI Chat Model"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.body.pessoa }}",
        "tableName": "chat_memory",
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        -992,
        -1136
      ],
      "id": "ebaa3e68-b398-4898-926c-0cc220c0f8f5",
      "name": "Postgres Chat Memory"
    },
    {
      "parameters": {
        "toolDescription": "Busca o ID interno e o nome oficial de uma obra no Sistema Obra Prima. ",
        "url": "https://example.com/webhook/get_obras",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "empresa",
              "value": "={{ $('agente_lancamento').item.json.body.empresa }}"
            },
            {
              "name": "usuario",
              "value": "={{ $('agente_lancamento').item.json.body.pessoa }}"
            },
            {
              "name": "nome",
              "value": "={{ $fromAI('parameters2_Value', `nome da obra, termo que será usado para pesquisar`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -1520,
        -144
      ],
      "id": "9d0efdec-d414-4939-a165-29623b2f71c5",
      "name": "obras"
    },
    {
      "parameters": {
        "toolDescription": "Busca o ID interno e o nome oficial de um fornecedor no Sistema Obra Prima. ",
        "url": "https://example.com/webhook/fornecedor",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "nome",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `nome do fornecedor`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -992,
        64
      ],
      "id": "2ad2aef5-5f60-4826-85dc-7f2c1c1e3c3c",
      "name": "fornecedor"
    },
    {
      "parameters": {
        "toolDescription": "Busca o ID de um tipo de documento.",
        "url": "https://example.com/webhook/tipo_doc",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "empresa",
              "value": "={{ $('agente_lancamento').item.json.body.empresa }}"
            },
            {
              "name": "usuario",
              "value": "={{ $('agente_lancamento').item.json.body.pessoa }}"
            },
            {
              "name": "nome",
              "value": "={{ $fromAI('parameters2_Value', `nome da obra, termo que será usado para pesquisar`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -1936,
        -352
      ],
      "id": "49c05664-d365-4a60-b64a-612e7bc98ae8",
      "name": "tipo_doc"
    },
    {
      "parameters": {
        "toolDescription": "Pega todos os pré-lançamentos do usuário ",
        "url": "=https://example.com/api/lancamentos/{{ $('agente_lancamento').item.json.body.pessoa }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('agente_lancamento').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "tipo",
              "value": "usuario_pagar"
            },
            {
              "name": "id_usuario",
              "value": "={{ $('agente_lancamento').item.json.body.pessoa }}"
            },
            {
              "name": "ids_empresas",
              "value": "={{ $('agente_lancamento').item.json.body.empresas_acesso }},{{ $('agente_lancamento').item.json.body.matrizes_acesso }}"
            },
            {
              "name": "preLancamento",
              "value": "true"
            },
            {
              "name": "filtrarPorUsuario",
              "value": "true"
            }
          ]
        },
        "options": {
          "response": {}
        }
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -752,
        -32
      ],
      "id": "a11cd496-b1f4-4b44-8807-6e9eb8577b56",
      "name": "get_lançamentos"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "pre_lancamento",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        -1920,
        -960
      ],
      "id": "e806fbef-1f51-4e3b-8c3f-ae501dd0c462",
      "name": "agente_lancamento",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "path": "fornecedor",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        3072,
        -640
      ],
      "id": "e22efc8f-3663-4233-800a-edabac6201ce",
      "name": "GET fornecedor",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        3744,
        -160
      ],
      "id": "06f68a4e-ca03-4af8-bcc7-70044f699fb1",
      "name": "Respond to Webhook3"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        3408,
        -160
      ],
      "id": "60e12f08-5e78-40f4-8128-c80637dd9d35",
      "name": "Microsoft SQL4",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "path": "banco",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        3072,
        -160
      ],
      "id": "e4225be6-7a4c-4143-bab8-36e844164023",
      "name": "GET conta bancária1",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "path": "tipo_doc",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        3072,
        -480
      ],
      "id": "b5faa65e-d2fa-4041-80d8-18110246ba05",
      "name": "GET tipo_doc",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        3408,
        -480
      ],
      "id": "50f4d019-36b5-461e-a092-74cea742ef23",
      "name": "Microsoft SQL5",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        3744,
        -320
      ],
      "id": "ecb60d27-1fd6-4866-8b66-6f2cd9296d31",
      "name": "Respond to Webhook5"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        3408,
        -320
      ],
      "id": "699272a4-3d31-4a23-bc94-c69ed95172c9",
      "name": "Microsoft SQL6",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        3408,
        -640
      ],
      "id": "34b46c95-5538-4860-a6ac-4b28fb96b347",
      "name": "Microsoft SQL7",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        3744,
        -640
      ],
      "id": "03cdb39c-e1c1-42fe-94e3-3d89bf6528a3",
      "name": "Respond to Webhook7"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        3744,
        -480
      ],
      "id": "861e8126-9710-4bd4-9f80-c132fd70ff21",
      "name": "Respond to Webhook8"
    },
    {
      "parameters": {
        "path": "centro_custo",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        3072,
        -320
      ],
      "id": "ae8afd53-268e-49ce-8989-87e04648e751",
      "name": "GET centro_custo",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "toolDescription": "Busca o ID interno e o nome oficial de um centro de custo no Sistema Obra Prima. ",
        "url": "https://example.com/webhook/centro_custo",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "empresa",
              "value": "={{ $('agente_lancamento').item.json.body.empresa }}"
            },
            {
              "name": "usuario",
              "value": "={{ $('agente_lancamento').item.json.body.pessoa }}"
            },
            {
              "name": "nome",
              "value": "={{ $fromAI('parameters2_Value', `nome da obra, termo que será usado para pesquisar`, 'string') }}"
            },
            {
              "name": "matriz",
              "value": "={{ $('agente_lancamento').item.json.body.matriz }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -1264,
        -48
      ],
      "id": "e5c5fad0-e99a-4c7a-bfee-fc82b951d845",
      "name": "centro_custo"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        1056,
        1632
      ],
      "id": "ea6fc8c3-caaa-42f7-95b2-160fd1a58531",
      "name": "GET empresas/matrizes"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "dia_a_dia",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        496,
        -928
      ],
      "id": "f8575cc2-b2ba-4c54-aab4-4c18bc9f94fe",
      "name": "agente_dia_a_dia1",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        2048,
        -928
      ],
      "id": "96b70fba-38fa-41e2-94ef-baacd40ff9a5",
      "name": "Respond to Webhook6"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-5.2",
          "mode": "list",
          "cachedResultName": "gpt-5.2"
        },
        "builtInTools": {},
        "options": {
          "temperature": 0.1,
          "topP": 1
        }
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        1040,
        -1120
      ],
      "id": "13e905fc-e78f-4de7-813f-c6ed43a9c559",
      "name": "OpenAI Chat Model2"
    },
    {
      "parameters": {
        "sessionIdType": "customKey",
        "sessionKey": "={{ $json.body.pessoa }}",
        "tableName": "chat_memory",
        "contextWindowLength": 20
      },
      "type": "@n8n/n8n-nodes-langchain.memoryPostgresChat",
      "typeVersion": 1.3,
      "position": [
        1328,
        -1120
      ],
      "id": "8ea2e332-bd46-439c-b4b7-d1c0525555cb",
      "name": "Postgres Chat Memory1"
    },
    {
      "parameters": {
        "toolDescription": "Utilize para pegar o ID interno de uma Obra\n",
        "url": "https://example.com/webhook/get_obras",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "empresa",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.empresa }}"
            },
            {
              "name": "usuario",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.pessoa }}"
            },
            {
              "name": "nome",
              "value": "={{ $fromAI('parameters2_Value', `nome da obra, termo que será usado para pesquisar`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        624,
        -240
      ],
      "id": "29e15dc8-8fef-4101-bd47-5e2c4562355f",
      "name": "obras2"
    },
    {
      "parameters": {
        "content": "## AGENTE DIA A DIA",
        "height": 80
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        512,
        -1120
      ],
      "typeVersion": 1,
      "id": "c0bf85c6-65aa-4e78-b719-41e18445096e",
      "name": "Sticky Note2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "=https://example.com/api/diadias",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.body.id_pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"id_obra\": {{ $json.body.id_obra }},\n    \"id_empresa\": {{ $json.body.id_empresa }},\n    \"id_pessoa\": {{ $json.body.id_pessoa }},\n    \"exibirCliente\": {{ $json.body.exibirCliente }},\n    \"texto\": \"{{ $json.body.texto }}\",\n    \"id_fase\": {{ $json.body.id_fase }}\n} ",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        4448,
        -800
      ],
      "id": "ee6e1de4-26bc-4466-bee5-b5b801d281bd",
      "name": "HTTP Request"
    },
    {
      "parameters": {
        "method": "PUT",
        "url": "=https://example.com/api/diadias/{{ $json.body.id_diaDia }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.body.id_pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"id_obra\": {{ $json.body.id_obra }},\n    \"id_empresa\": {{ $json.body.id_empresa }},\n    \"id_pessoa\": {{ $json.body.id_pessoa }},\n    \"exibirCliente\": {{ $json.body.exibirCliente }},\n    \"texto\": \"{{ $json.body.texto }}\",\n    \"id_fase\": {{ $json.body.id_fase }}\n} ",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        4576,
        -640
      ],
      "id": "408ff59f-d795-40a8-87bc-eae4b6ee15ac",
      "name": "HTTP Request1"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "editar_diaadia",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        4192,
        -640
      ],
      "id": "d73d714e-3a41-40cd-99cf-99dadc1d21e1",
      "name": "editar dia a dia1",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "criar_diaadia",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        4192,
        -800
      ],
      "id": "c2fc9cb2-d8ec-411f-8457-4c08043af079",
      "name": "criar dia a dia1",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "adicionar_anexo_dia_a_dia",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        4192,
        -480
      ],
      "id": "abc59cbc-bcb5-4621-bc1f-d3dbc476ebd5",
      "name": "adicionar anexo1",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "url": "={{ $json.body.anexoUrl }}",
        "options": {
          "response": {
            "response": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        4448,
        -480
      ],
      "id": "9457c002-4b08-4c59-8671-6191a045ee4e",
      "name": "baixar"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://example.com/api/diadiaAnexos",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.body.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "arquivo",
              "inputDataFieldName": "data"
            },
            {
              "name": "json",
              "value": "={{\n  JSON.stringify([\n    {\n      nome: $binary.data.fileName || 'imagem-whats.jpg',\n      id_diaDia: Number($json.body.id_diaDia)\n    }\n  ])\n}}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        4704,
        -480
      ],
      "id": "156a38ed-fc88-4638-a167-a458b8825d21",
      "name": "enviar"
    },
    {
      "parameters": {
        "path": "fase_servico",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2,
      "position": [
        3072,
        160
      ],
      "id": "c0b29f10-7f29-4374-be7d-fa7c965b6f1b",
      "name": "GET fase serviço",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "5f2bddd7-42fa-48b7-8019-8fe0523ce314",
              "name": "id_diaDia",
              "value": "={{ $json.object.id_diaDia }}",
              "type": "number"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        4704,
        -800
      ],
      "id": "d4ef7324-4389-4bbf-bfbe-d077176da873",
      "name": "Edit Fields1"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        4976,
        -800
      ],
      "id": "4d7188b0-d255-422c-b585-a15254b20013",
      "name": "Respond to Webhook10"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        4976,
        -640
      ],
      "id": "e329d241-572b-490f-8366-8ce24ffc355c",
      "name": "Respond to Webhook11"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        4976,
        -480
      ],
      "id": "e9778fa7-5767-4efd-9636-25b87e353720",
      "name": "Respond to Webhook12"
    },
    {
      "parameters": {
        "respondWith": "allIncomingItems",
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        3744,
        160
      ],
      "id": "a5091f6b-5f15-4622-bdb2-fbc1e805e346",
      "name": "Respond to Webhook13"
    },
    {
      "parameters": {
        "content": "## WEBHOOKS - AGENTE DIA A DIA",
        "height": 80,
        "width": 1104,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        4112,
        -912
      ],
      "typeVersion": 1,
      "id": "d1810018-af1a-4d84-865c-7ac2d61c6679",
      "name": "Sticky Note9"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "criar_pre_lançamento",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        5408,
        -800
      ],
      "id": "9df269ca-ffaf-4bf1-8be4-176962ba2b32",
      "name": "criar pré-lançamento",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "editar_pre_lançamento",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        5408,
        -640
      ],
      "id": "f26b2f80-9357-4cee-b3cc-99f6ed183cd0",
      "name": "editar pré-lançamento",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        6192,
        -800
      ],
      "id": "f9c19e8c-b506-4d64-8563-925ed0bcb154",
      "name": "Respond to Webhook9"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        6192,
        -640
      ],
      "id": "4e91e306-c6f0-4f9c-8442-1d3624430ccc",
      "name": "Respond to Webhook14"
    },
    {
      "parameters": {
        "content": "## WEBHOOKS - AGENTE PRÉ-LANÇAMENTO",
        "height": 80,
        "width": 1104,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        5328,
        -912
      ],
      "typeVersion": 1,
      "id": "a8047990-a79c-4ef3-97d2-4528346d1938",
      "name": "Sticky Note10"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "anexar_imagem_solicacao",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        6624,
        -800
      ],
      "id": "acf22957-71d1-4b61-898a-a6ece46367b3",
      "name": "anexar imagem",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "url": "={{ $json.body.imageUrl }}",
        "options": {
          "response": {
            "response": {}
          }
        }
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        6880,
        -800
      ],
      "id": "7a2c60d0-2aed-4d4e-a93c-cc424b711316",
      "name": "baixar imagem"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://example.com/api/solicitacaoAnexos",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.body.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "contentType": "multipart-form-data",
        "bodyParameters": {
          "parameters": [
            {
              "parameterType": "formBinaryData",
              "name": "arquivo",
              "inputDataFieldName": "data"
            },
            {
              "name": "json",
              "value": "={{\n  JSON.stringify([\n    {\n      nome: $binary.data.fileName || 'imagem-whats.jpg',\n      id_solicitacao: Number($json.body.id_solicitacao),\n      tamanho: Number(\n        ($binary.data.fileSize || '0').replace(/[^\\d]/g, '')\n      )\n    }\n  ])\n}}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        7136,
        -800
      ],
      "id": "7b2226ac-6028-46fc-a074-d9bda86c6d0f",
      "name": "enviar imagem"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        7408,
        -800
      ],
      "id": "016949f6-1571-4324-91ce-bdc6a47c5ee1",
      "name": "Respond to Webhook15"
    },
    {
      "parameters": {
        "toolDescription": "Vincula uma imagem (via URL) a uma solicitação existente. Use apenas após a confirmação do usuário. Requer o ID interno da solicitação, consulte na tool 'listar_solicitacoes1'.",
        "method": "POST",
        "url": "https://example.com/webhook/anexar_imagem_solicacao",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('Agente Solicitações1').item.json.body.pessoa }}"
            },
            {
              "name": "imageUrl",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters1_Value', `URL EXATA DA IMAGEM`, 'string') }}"
            },
            {
              "name": "id_solicitacao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters2_Value', `ID INTERNO DA SOLICITAÇÃO, DEVE SER BUSCADO NA TOOL \"listar_solicitacoes1\"`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -2784,
        -16
      ],
      "id": "dceeedbc-8d19-4525-9fcf-6d808cc96688",
      "name": "anexar imagem1"
    },
    {
      "parameters": {
        "content": "## WEBHOOK - AGENTE SOLICITAÇÃO",
        "height": 80,
        "width": 1104,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        6544,
        -912
      ],
      "typeVersion": 1,
      "id": "6cef329c-2459-4db7-a8a3-72840b28ea68",
      "name": "Sticky Note11"
    },
    {
      "parameters": {
        "modelId": {
          "__rl": true,
          "value": "gpt-4o",
          "mode": "list",
          "cachedResultName": "GPT-4O"
        },
        "responses": {
          "values": [
            {
              "role": "system",
              "content": "Você é um assistente de extração de dados de alta precisão para o sistema Obra Prima.\n\nSua missão é realizar a leitura integral (OCR) do documento fornecido. Se a imagem contiver qualquer texto legível, sua tarefa é transcrever EXATAMENTE tudo o que está escrito, sem resumir, sem parafrasear e sem omitir termos.\n\nDIRETRIZES DE EXTRAÇÃO:\n\nFidelidade Total: Transcreva cada linha, título, observação, quantidade, unidade ou código exatamente como aparecem na imagem.\n\nPreservação de Estrutura: Mantenha a organização visual do texto (se estiver em lista, use lista; se houver cabeçalhos, destaque-os).\n\nCaptura de Detalhes: Não ignore informações que pareçam secundárias. Se está escrito, deve ser extraído.\n\nREGRAS DE CLASSIFICAÇÃO:\n\nSe a imagem for um orçamento, lista (manuscrita ou digitada), print de tela, etiqueta ou documento com dados de compra: Extraia o texto completo.\n\nSe a imagem for apenas uma foto de ambiente, objeto sem texto ou totalmente ilegível, responda APENAS: ANEXO.\n\nEXEMPLO DE SAÍDA ESPERADA: \"edita a descrição pra Edição de material e adiciona telhas - 5 unidades\" (Transcreva exatamente assim se for o que estiver na imagem)."
            },
            {
              "type": "file",
              "fileUrl": "={{ $json.body.document.documentUrl }}"
            }
          ]
        },
        "builtInTools": {},
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.openAi",
      "typeVersion": 2,
      "position": [
        -3696,
        2032
      ],
      "id": "2d13f16f-c19f-4e9e-9642-bc630cff4c25",
      "name": "Analisa documento"
    },
    {
      "parameters": {
        "conditions": {
          "options": {
            "caseSensitive": false,
            "leftValue": "",
            "typeValidation": "strict",
            "version": 2
          },
          "conditions": [
            {
              "id": "9ebe9481-a8ea-44f3-929c-686e31ae6e1a",
              "leftValue": "={{ $json.output[0].content[0].text }}",
              "rightValue": "ANEXO",
              "operator": {
                "type": "string",
                "operation": "equals"
              }
            }
          ],
          "combinator": "and"
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.if",
      "typeVersion": 2.2,
      "position": [
        -3328,
        2032
      ],
      "id": "38428467-27d2-4cbc-8138-9ee898620272",
      "name": "If1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "408a9072-20bb-4db4-8009-09b4ed0e6f27",
              "name": "content",
              "value": "=Aqui está a URL do doc a ser anexado: {{ $('Webhook').item.json.body.document.documentUrl }} - {{ $('Webhook').item.json.body.document.caption }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3056,
        1936
      ],
      "id": "c6dbcdb0-92ce-469d-b550-e9239430a7d8",
      "name": "URL1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "408a9072-20bb-4db4-8009-09b4ed0e6f27",
              "name": "content",
              "value": "={{ $json.output[0].content[0].text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        -3056,
        2128
      ],
      "id": "5a44ad67-de46-4b04-9e3f-e55XXXXXXXXXXXb",
      "name": "Trata documento"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "fea22240-afdc-42c1-8710-51cb5234612b",
              "name": "nome",
              "value": "={{ $('GET User by Phone').item.json.nome }}",
              "type": "string"
            },
            {
              "id": "89252ebc-dd9d-436b-b625-9834ce099fc3",
              "name": "empresa",
              "value": "={{ $('GET User by Phone').item.json.empresa }}",
              "type": "number"
            },
            {
              "id": "75735e46-7243-4927-988c-10cdbd45ba19",
              "name": "matriz",
              "value": "={{ $('GET User by Phone').item.json.matriz }}",
              "type": "number"
            },
            {
              "id": "d09ffd5f-56f3-4e69-a0e9-565b1a8efdf0",
              "name": "pessoa",
              "value": "={{ $('GET User by Phone').item.json.pessoa }}",
              "type": "number"
            },
            {
              "id": "7c47f724-4916-4e9d-9c84-8f6a9cc13b2a",
              "name": "chatInput",
              "value": "={{ $('Chat | Whats').item.json.chatInput }}",
              "type": "string"
            },
            {
              "id": "6c298b87-2612-401b-bafe-dc8218f5e12c",
              "name": "sessionId",
              "value": "={{ $('Chat | Whats').item.json.phone }}",
              "type": "string"
            },
            {
              "id": "554bc138-b4f2-4a3b-9411-911d231b4d2e",
              "name": "canal",
              "value": "={{ $('Chat | Whats').item.json.canal }}",
              "type": "string"
            },
            {
              "id": "abfa57ba-fd49-4122-a679-43014967b00e",
              "name": "empresas_acesso",
              "value": "={{ $('GET empresas/matrizes').item.json.empresa }}",
              "type": "number"
            },
            {
              "id": "ac32b9d8-2052-4309-900c-f1192ca67eaa",
              "name": "matrizes_acesso",
              "value": "={{ $('GET empresas/matrizes').item.json.matriz }}",
              "type": "number"
            }
          ]
        },
        "includeOtherFields": true,
        "options": {
          "stripBinary": false
        }
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        1520,
        1632
      ],
      "id": "8c6b2ff8-61bc-4b33-93d0-2dc727cfc384",
      "name": "Interface"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://example.com/webhook/pre_lancamento",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "empresa",
              "value": "={{ $('GET User by Phone').item.json.empresa }}"
            },
            {
              "name": "matriz",
              "value": "={{ $('GET User by Phone').item.json.matriz }}"
            },
            {
              "name": "pessoa",
              "value": "={{ $('GET User by Phone').item.json.pessoa }}"
            },
            {
              "name": "chatImput",
              "value": "={{ $json.msg_usuario }}"
            },
            {
              "name": "empresas_acesso",
              "value": "={{ $('GET empresas/matrizes').item.json.empresa }}"
            },
            {
              "name": "matrizes_acesso",
              "value": "={{ $('GET empresas/matrizes').item.json.matriz }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2976,
        1392
      ],
      "id": "f4be4398-5df3-4f38-884d-6c39a656f6c8",
      "name": "agente_pre_lancamento"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://example.com/webhook/agente_solicitacao_compra",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "empresa",
              "value": "={{ $('GET User by Phone').item.json.empresa }}"
            },
            {
              "name": "matriz",
              "value": "={{ $('GET User by Phone').item.json.matriz }}"
            },
            {
              "name": "pessoa",
              "value": "={{ $('GET User by Phone').item.json.pessoa }}"
            },
            {
              "name": "chatImput",
              "value": "={{ $json.msg_usuario }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2976,
        1552
      ],
      "id": "fe6164ca-899a-4698-9c26-81ed712f6a82",
      "name": "agente_solicitação1"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://example.com/webhook/dia_a_dia",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "empresa",
              "value": "={{ $('GET User by Phone').item.json.empresa }}"
            },
            {
              "name": "matriz",
              "value": "={{ $('GET User by Phone').item.json.matriz }}"
            },
            {
              "name": "pessoa",
              "value": "={{ $('GET User by Phone').item.json.pessoa }}"
            },
            {
              "name": "chatImput",
              "value": "={{ $json.msg_usuario }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        2976,
        1712
      ],
      "id": "7b9415e4-a9dc-40b2-832a-4b2a8546238f",
      "name": "agente_dia_a_dia"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api.z-api.io/instances/3CD4239D28F3D051611C3E9E78E3C10C/token/3213ACC0D957259E64ABB6C7/send-text",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "client-token",
              "value": "F9c637e3ad97f4e2495ab638a8f33c07bS"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "phone",
              "value": "={{ $('Interface').item.json.sessionId }}"
            },
            {
              "name": "message",
              "value": "={{ $json.output }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        3584,
        1872
      ],
      "id": "ab7d73c5-1dd1-428b-9e46-584dfcb9eaaf",
      "name": "Retorno ao usuário"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        3584,
        1424
      ],
      "id": "d1c5bf68-faaf-4bd7-ad41-9725ece62648",
      "name": "Atualiza sessão"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "leftValue": "={{ $json.agente_selecionado }}",
                    "rightValue": "agente_pre_lancamento",
                    "operator": {
                      "type": "string",
                      "operation": "equals"
                    },
                    "id": "af7ef02d-62fa-43a6-af3f-adc0e4717f6b"
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "agente_pre_lancamento "
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "c186e735-aca1-41d5-a563-f5f8308a363d",
                    "leftValue": "={{ $json.agente_selecionado }}",
                    "rightValue": "agente_solicitacao",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "agente_solicitacao"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "6965eaa1-af1c-4f74-9683-544e7a5f192c",
                    "leftValue": "={{ $json.agente_selecionado }}",
                    "rightValue": "agente_dia_a_dia",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "agente_dia_a_dia"
            },
            {
              "conditions": {
                "options": {
                  "caseSensitive": false,
                  "leftValue": "",
                  "typeValidation": "strict",
                  "version": 2
                },
                "conditions": [
                  {
                    "id": "f586d04e-5258-456c-9c4b-e75c1bdbfd6e",
                    "leftValue": "={{ $json.agente_selecionado }}",
                    "rightValue": "desconhecido",
                    "operator": {
                      "type": "string",
                      "operation": "equals",
                      "name": "filter.operator.equals"
                    }
                  }
                ],
                "combinator": "and"
              },
              "renameOutput": true,
              "outputKey": "desconhecido"
            }
          ]
        },
        "options": {
          "ignoreCase": true
        }
      },
      "type": "n8n-nodes-base.switch",
      "typeVersion": 3.3,
      "position": [
        2656,
        1600
      ],
      "id": "04c22167-1e8b-4cfc-97dc-67be3bfd16c0",
      "name": "Encaminha ao agente"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        1760,
        1632
      ],
      "id": "8a862144-0a50-480e-8f71-c3de6a9fdc5a",
      "name": "Verifica sessão atual e cria se não houver",
      "alwaysOutputData": true
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $('Interface').item.json.chatInput }}",
        "messages": {
          "messageValues": [
            {
              "message": "=# PAPEIS E OBJETIVO\nVocê é o Roteador Sênior e Orquestrador do sistema \"Obra Prima\". Sua responsabilidade crítica é analisar a mensagem do usuário e determinar se ele deve continuar com o agente atual ou se há uma mudança inequívoca de intenção.\n\n- Agente Ativo Atual: {{ $json.agente_ativo }}\n\n# AGENTES DISPONÍVEIS E ESCOPO\n1. ID: \"agente_dia_a_dia\"\n   Referente ao módulo \"dia a dia\", utilizado para envio de mensagens, anotação de obra.\n2. ID: \"agente_solicitacao\"\n   Referente ao módulo de Compras, utilizado para solicitação/compra de material, itens ou serviço.\n3. ID: \"agente_pre_lancamento\"\n   Referente ao módulo Financeiro, utilizado para registro de notas fiscais, boletos, pré-lançamento financeiro, contas a pagar, documentos financeiros.\n\n# ENTIDADE COMPARTILHADA: \"OBRA\" e \"ANEXO\" (ATENÇÃO CRÍTICA)\n- Mencionar uma obra, trocar o nome da obra ou corrigir a obra NÃO constitui mudança de intenção.\n- Anexar ou excluir uma imagem não constitui mudança de intenção.\n- Se o usuário disser \"muda a obra para X\", \"a obra é a Y\", \"anexa essa imagem\", \"exclui a imagem x\" isso é apenas uma atualização de parâmetro dentro do agente atual.\n\n# REGRAS DE ROTEAMENTO (LÓGICA SENIOR)\n\n### REGRA 1: LEI DA INÉRCIA (Prioridade Máxima)\nSe `agente_ativo` for diferente de \"nenhum\", você deve ter um viés extremamente forte para MANTER o agente atual.\n- Se o usuário faz uma **correção** (\"não é esse valor\", \"muda a obra\", \"a data está errada\"), MANTER AGENTE ATUAL.\n- Se o usuário fornece um **dado** solicitado (\"é a obra 123\", \"custou 50 reais\"), MANTER AGENTE ATUAL.\n\n### REGRA 2: DETECÇÃO DE MUDANÇA DE INTENÇÃO\nApenas troque o agente se o usuário usar verbos que denotam explicitamente uma nova operação de outro módulo.\n- Exemplo de Troca Válida: Usuário está no Financeiro e diz: \"Esquece isso, preciso solicitar material\" (agente_solicitacao).\n- Exemplo de Falso Positivo (NÃO TROCAR): Usuário está no Financeiro e diz: \"Muda para a obra X\". (O verbo \"muda\" refere-se ao parâmetro do lançamento, não ao módulo -> MANTER agente_pre_lancamento).\n\n### REGRA 3: START (Sem agente ativo)\nSe `agente_ativo` for \"nenhum\" ou \"null\":\n- Analise a intenção primária. Se for ambíguo, retorne \"desconhecido\".\n- Saudações (\"oi\", \"tarde\") -> \"desconhecido\".\n\n# FORMATO DE RESPOSTA\nRetorne ESTRITAMENTE apenas o ID do agente escolhido. Nada mais.\n\nOpções:\n- agente_pre_lancamento\n- agente_dia_a_dia\n- agente_solicitacao\n- desconhecido"
            }
          ]
        },
        "batching": {}
      },
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "typeVersion": 1.9,
      "position": [
        2032,
        1632
      ],
      "id": "2e8a06cf-63b3-487f-bead-17fe11517a6e",
      "name": "Roteador"
    },
    {
      "parameters": {
        "model": {
          "__rl": true,
          "value": "gpt-5-mini",
          "mode": "list",
          "cachedResultName": "gpt-5-mini"
        },
        "responsesApiEnabled": false,
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenAi",
      "typeVersion": 1.3,
      "position": [
        2032,
        1808
      ],
      "id": "b67cb6e5-0746-4e43-9065-7e84aac66878",
      "name": "Chat1"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "b4e92c11-7030-4d9e-b4b5-21f44d98f1d0",
              "name": "msg_usuario",
              "value": "={{ $('Interface').item.json.chatInput }}",
              "type": "string"
            },
            {
              "id": "29628e96-a9e8-4323-9b5a-775acc29e258",
              "name": "agente_selecionado",
              "value": "={{ $json.text }}",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2416,
        1632
      ],
      "id": "7d29efbb-d285-4b8b-aef1-4be58cf0643b",
      "name": "output x msg usuário"
    },
    {
      "parameters": {
        "jsCode": "let msg = $json.output || \"\";\n\n// Remove todos os asteriscos\nmsg = msg.replace(/\\*/g, \"\");\n\nreturn { output: msg };"
      },
      "type": "n8n-nodes-base.code",
      "typeVersion": 2,
      "position": [
        3312,
        1648
      ],
      "id": "858cd854-8350-4c8b-9e1c-79dff778bd20",
      "name": "Formata resposta"
    },
    {
      "parameters": {
        "assignments": {
          "assignments": [
            {
              "id": "846ee7c0-3cc2-41a4-b0f2-3c14cc2339f1",
              "name": "output",
              "value": "Não consegui identificar o que você precisa no momento, pode me explicar melhor para eu te direcionar corretamente?",
              "type": "string"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.set",
      "typeVersion": 3.4,
      "position": [
        2976,
        1872
      ],
      "id": "e7dda911-cad4-4dcd-84ba-a4879cdb5523",
      "name": "mensagem de esclarecimento"
    },
    {
      "parameters": {
        "content": "## Verifica agente compatível",
        "height": 368,
        "width": 368,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        1968,
        1568
      ],
      "typeVersion": 1,
      "id": "914bbc94-5ed6-467a-9582-33893f1f7084",
      "name": "Sticky Note1"
    },
    {
      "parameters": {
        "content": "## Envia mensagem ao usuário",
        "height": 240,
        "width": 352,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        3456,
        1808
      ],
      "typeVersion": 1,
      "id": "1f09322e-30a2-47f0-9153-7e5453e81148",
      "name": "Sticky Note3"
    },
    {
      "parameters": {
        "content": "## Bloqueia em caso de intervenção humana",
        "height": 544,
        "width": 800,
        "color": 3
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -5584,
        800
      ],
      "typeVersion": 1,
      "id": "430b84b5-28a9-41b7-9f6c-b58d833238ff",
      "name": "Sticky Note4"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.body.chatImput }}",
        "options": {
          "systemMessage": "=Você é um atendente de balcão ágil e direto. Sua comunicação deve ser idêntica a um humano no WhatsApp: sem enrolação, sem rótulos técnicos e sem formatação de \"sistema\".\n\nDATA ATUAL: {{ $now.toString() }}\n\n🚨 REGRA DE OURO: A TRAVA ABSOLUTA (CRÍTICO)\nPROIBIDO CHAMAR TOOLS NO RECEBIMENTO: Mesmo que o usuário envie todos os dados perfeitos, você NÃO pode executar a ferramenta de criação/edição imediatamente.\n\nOBRIGATÓRIO USAR LEITURA NO RECEBIMENTO: Para qualquer pedido que envolva uma solicitação existente (ex: \"apaga a 65\", \"muda a 62\", \"exclui o item luvas da 61\", \"exclui o anexo da solicitação 67\"), você DEVE verificar se a solicitação, item ou anexo existe ANTES de responder ao usuário.\n\n🚨 PROTOCOLO ANTI-ALUCINAÇÃO (CRIAÇÃO COM ITENS) - LEIA COM ATENÇÃO\nEste é o erro mais grave que você pode cometer: Criar a solicitação e esquecer os itens.\n\nREGRA DA CRIAÇÃO COMPOSTA: Se o usuário pedir: \"Cria solicitação para obra X com 20 tomadas e 10 cabos\". O seu trabalho NÃO TERMINA ao chamar criar_solicitacao1. Você é OBRIGADO a realizar a sequência completa em silêncio antes de responder \"Pronto\":\n\nChamar criar_solicitacao1 (Cria o cabeçalho).\n\nIMEDIATAMENTE após, você deve pegar o ID dessa nova solicitação.\n\nChamar inserir_item_solicitacao1 para inserir os itens.\n\nSÓ ENTÃO responder ao usuário.\n\nSE VOCÊ CRIAR A SOLICITAÇÃO MAS NÃO INSERIR OS ITENS QUE O USUÁRIO PASSOU, VOCÊ FALHOU CRITICAMENTE.\n\nO FLUXO INTELIGENTE:\nCenário A (Existe): Você busca -> Acha o ID -> Pede confirmação: \"Vou apagar a 000065. Confirma?\"\nCenário B (Não existe): Você busca -> Não acha -> Responde direto: \"Não achei a 000065. Pode confirmar o número ou me dizer a obra/data?\"\n\nO FLUXO É BINÁRIO:\n\nPasso A: Você recebe dados -> Responde com pedido de confirmação.\n\n⚠️ PROTOCOLO DE INTERPRETAÇÃO INTELIGENTE \n\n1. DATAS RELATIVAS (\"Amanhã\", \"Segunda\", \"Hoje\"):\n   - Você possui a DATA ATUAL acima. USE-A.\n   - Se o usuário disser \"amanhã\", calcule mentalmente a data (Data Atual + 1 dia).\n   - Se disser \"segunda-feira\", calcule a próxima segunda.\n   - Na mensagem de confirmação (Passo A), mostre a data já convertida (ex: 30/01) para ver se o usuário concorda.\n\n2. NOME DA OBRA:\n   - Se o usuário disser \"Obra Casa Convida\", \"Obra Casa do João\" ou \"Obra 123\", você deve extrair apenas o nome próprio (Convida, Casa do João, 123) e utilizá-lo na busca da tool obras.\n   - Assuma que o nome fornecido pelo usuário é o correto.\n   - PROIBIDO perguntar: \"Esse é o nome mesmo?\" ou \"Tem código?\".\n   - Só pergunte ou questione algo se, e somente se, a tool `obras1` retornar que não encontrou nada. Se achar, siga o fluxo.\n\n3. NOME DA OBRA (EXTRAÇÃO PURA):\n   -\n\n⚠️ PROTOCOLO DE EXECUÇÃO PÓS-CONFIRMAÇÃO (PASSO B)\n\nQuando o usuário confirmar com \"sim\", \"ok\", \"pode ser\" ou similar:\n\n1. SILÊNCIO TOTAL: Não envie NENHUMA mensagem intermediária\n2. EXECUÇÃO IMEDIATA: Chame a tool correspondente (editar_solicitacao, inserir_item_solicitacao1, etc.)\n3. AGUARDE O RETORNO: Só responda após receber o output da ferramenta\n4. RESPOSTA ÚNICA: Use o resultado real da tool para compor a mensagem de sucesso. Ex: \"Pronto! Solicitação 61 criada/editada/excluída com sucesso.\"\n\n❌ JAMAIS FAÇA:\n- \"Show, vou registrar agora\" → PROIBIDO\n- \"Pronto! Descrição atualizada\" → SEM TER CHAMADO A TOOL\n- Simular sucesso baseado apenas na confirmação do usuário\n\n✅ FLUXO CORRETO:\nUser: \"sim\"\n→ [Agente chama editar_solicitacao silenciosamente]\n→ [Aguarda retorno HTTP 200]\n→ Agente: \"Pronto! Descrição da 000062 atualizada.\"\n\nREGRA ABSOLUTA: Sua resposta de sucesso DEVE vir DEPOIS da execução real da tool, nunca antes.\n\n❌ PROIBIDO NO PASSO B: É terminantemente proibido enviar mensagens intermediárias como \"Show, vou registrar agora\", \"Beleza, um segundo\" ou qualquer frase antes de chamar a ferramenta. Se o usuário confirmou, sua próxima e única mensagem deve ser o \"Pronto\" (após a execução).\n\nPROTOCOLO DE COLETA (PEDIDO DE DADOS)\nSempre que o usuário quiser iniciar uma solicitação, envie uma única mensagem pedindo Obra, data, descrição e itens/quantidade/unidade, sem exemplos, em forma de lista e educadamente.\n\n1. ESTÉTICA E TONE OF VOICE\nPROIBIDO: Usar colchetes [ ], chaves { }, títulos (\"Resumo:\", \"Informe:\") ou linguagem robótica.\n\nPROIBIDO: Falar sobre \"ID interno\", \"Banco de dados\", \"Erro de sistema\" ou pedir desculpas técnicas. Se der erro, diga apenas \"Não consegui achar, pode confirmar o número?\"\n\nESTILO: Texto corrido, curto e direto.\n\nEXEMPLO: \"Solicitação 000061: mudar a quantidade para 45 un. Posso registrar?\"\n\n2. PROTOCOLO DE TRADUÇÃO DE IDs (INVISIBLE HAND)\nESSA É A REGRA MAIS IMPORTANTE PARA EVITAR ERROS:\n\nO MUNDO DUAL: O usuário SÓ conhece o Número Visual (ex: 000061). As Tools SÓ aceitam o ID Interno (ex: 1200).\n\nA TRADUÇÃO OBRIGATÓRIA:\n\nJamais tente adivinhar que o ID interno é igual ao visual (ex: ID 61 para a 000061). Isso gera erro.\n\nAntes de criar/editar/excluir uma solicitação, anexar uma imagem ou capturar (get) anexos, você deve silenciosamente usar a tool listar_solicitacoes1.\n\nCruze o número visual que o usuário falou (000061) com a lista retornada para encontrar o verdadeiro id (1200).\n\nUse esse ID oculto (1200) nas tools de inserir, editar ou deletar.\n\nSILÊNCIO ABSOLUTO: Nunca mencione essa busca ou distinção de IDs para o usuário. Para ele, é tudo transparente.\n\n3. GESTÃO DE CONTEXTO\nMEMÓRIA IMEDIATA: Se você acabou de criar/editar a solicitação 000061, o ID Interno dela já deve estar na sua memória. Use-o para as próximas ações (como adicionar itens) sem perguntar a obra novamente.\n\nMUDANÇA DE FOCO: Se o usuário mudar de assunto, chame listar_solicitacoes1 novamente para se localizar.\n\n4. PROTOCOLO OPERACIONAL\nCOLETA: Falta dado? Peça direto. \"Preciso saber qual a obra e a data.\"\n\nCONFIRMAÇÃO (GATILHO): Apresente o resumo natural.\n\nCriação: \"Vou criar para a Obra Verano dia 12/02. Item: 50 pregos. Confirma?\"\n\nAdição: \"Vou incluir 'limpeza de piso - 20m²' na solicitação 000061. Pode ser?\"\n\nSUCESSO: Resposta de uma linha. Criação: \"Pronto! Solicitação 000061 criada.\" 🚨 REGRA: O usuário JÁ confirmou os dados no passo anterior. Na mensagem de sucesso, é PROIBIDO repetir a data, descrição, obra ou lista de materiais. Informe APENAS que foi criada e o número visual.\n\nEdição: \"Pronto! Solicitação 000061 editada.\" Adição: \"Pronto! Item adicionado à solicitação 000061\"\n\n5. REGRAS TÉCNICAS E TOOLS (BACKEND)\nLISTAGEM E BUSCA (ESSENCIAIS)\n\nlistar_solicitacoes1:\n* USO OBRIGATÓRIO: Use IMEDIATAMENTE antes de qualquer ação de anexo, edição, inserção ou exclusão se você não tiver o ID Interno validado na mesma execução.\n* Objetivo: Traduzir \"000062\" para o ID real (ex: 1271).\n\nExemplo: Usuário diz \"põe na 000061\". Agente chama essa tool -> Acha a 000061 na lista -> Pega o ID 1450 -> Usa o 1450 na tool de inserir item.\n\nlistar_item_solicitacao: Lista itens de uma solicitação. Essencial para pegar o id_item antes de editar/excluir um item específico.\n\nobras1: Busca ID interno da obra pelo nome.\n\nconsultar situacao: Verifica status pelo ID interno.\n\nESCRITA (SÓ APÓS CONFIRMAÇÃO DO USUÁRIO)\n\ncriar_solicitacao1: Cria cabeçalho. Requer id_obra (via obras1) e data ISO.\n\ninserir_item_solicitacao1: Adiciona itens, requer ID Interno.\n\nATENÇÃO: O campo id_solicitacao TEM QUE SER O ID INTERNO (obtido via listar_solicitacoes1). JAMAIS envie o número visual (000061) neste campo.\n\neditar solicitação: Atualiza cabeçalho (Obra/Data/Desc). Requer merge (preserve dados não citados). Use ID Interno (tool 'listar_solicitacoes1).\n\natualizar_item_solicitacao: Edita item (qtd/nome). Requer ID do item (tool 'listar_item_solicitacao')\n\ndeletar_item_solicitacao: Remove item. Requer ID do item (tool 'listar_item_solicitacao')\t\n\ndeletar solicitação: Remove solicitação inteira. Requer ID Interno (tool 'listar_solicitacoes1)\n\nANEXOS\n\nanexar_imagem1:\n`id_solicitacao` DEVE SER O ID INTERNO (ex: 1271), NUNCA O VISUAL, busque em `listar_solicitacoes1`.\n\ndeletar anexo: Chame 'get_anexos' para pegar o id do anexo\n\nget_anexos: chame 'listar_solicitacoes' para pegar o id interno da solicitação.\n\nCENÁRIO DE EXEMPLO DE SUCESSO:\n\nUser: \"Adiciona limpeza de piso 20m2 na solicitação 000061\"\n\nIA (Pensamento oculto): O usuário falou \"000061\". Não posso assumir que o ID é 61. Vou checar meus dados ou chamar listar_solicitacoes1 no próximo passo se eu não tiver o ID real mapeado.\n\nIA (Resposta): \"Vou incluir o item: limpeza de piso - 20 m² na solicitação 000061. Confirma?\"\n\nUser: \"Sim\"\n\nIA (Ação): Chama listar_solicitacoes1 (se não tiver o ID em memória) -> Descobre que 000061 é ID 1200 -> Chama inserir_item_solicitacao1 com id_solicitacao: 1200.\n\nIA (Resposta): \"Pronto! Item adicionado.\"",
          "passthroughBinaryImages": false
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 2,
      "position": [
        -3760,
        -960
      ],
      "id": "fe20009f-76d9-4eeb-8e7c-83b998b46b1c",
      "name": "Solicitação de compras"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.body.chatImput }}",
        "options": {
          "systemMessage": "=CONTEXTO E PERSONA\nData Atual: {{ $now.toString() }}\nVocê é o Assistente Financeiro do sistema Obra Prima.\nSua comunicação deve ser humana, objetiva e profissional (estilo WhatsApp corporativo).\nEvite formatação excessiva (markdown complexo). Use linguagem direta.\n\n🚨 REGRAS DE VISUALIZAÇÃO E FORMATO (FRONT-END) 🚨\n\n1. DATAS: Para o usuário, SEMPRE mostre no formato brasileiro: DD-MM-AAAA (ex: 15-03-2026).\n   - Internamente (nas tools), continue enviando YYYY-MM-DD.\n   - Cálculo de Datas: Se o usuário disser \"vencimento amanhã\" ou \"daqui 5 dias\", calcule a data baseada em {{ $now }} e assuma como verdade. Não pergunte \"Você quis dizer dia X?\". Apenas calcule e use.\n\n2. IDs e NÚMEROS:\n   - NUNCA mostre o ID interno do banco de dados (ex: 2596, UUIDs).\n   - O usuário só conhece o NÚMERO DO DOCUMENTO (ex: 000411). Use apenas este número nas conversas.\n\n3. CONTEXTO DE EDIÇÃO:\n   - Se, logo após uma criação ou interação, o usuário disser \"muda a data\" ou \"edita o valor\" sem dizer o número, assuma que ele fala do lançamento que acabou de ser tratado.\n\n---\n\n💬 SCRIPTS DE COMUNICAÇÃO (OBRIGATÓRIOS)\n\n1. AO INICIAR COLETA (Novo Pré-Lançamento):\n   \"Beleza, vamos criar esse pré-lançamento! Me informe por gentileza:\n   1 - Essa despesa é de obra ou própria?\n   2 - Qual a Obra/Centro de Custo?\n   3 - Qual o valor?\n\n   Fornecedor, vencimento, conta, tipo de documento, descrição e observação é opcional.\"\n\n2. RESUMO PARA CONFIRMAÇÃO (Antes de Criar):\n   Estrutura obrigatória:\n   \"Pré-lançamento no valor de R$[Valor] para [Nome da Obra/Centro].\n   [Liste aqui Fornecedor, Vencimento, Conta, etc., SOMENTE SE o usuário informou. Se não informou, não cite.]\n\n   Posso lançar ou deseja adicionar algo mais?\"\n\n3. CONFIRMAÇÃO PARA EDIÇÃO/EXCLUSÃO:\n   Seja direto.\n   - Edição: \"Irei editar o pré-lançamento [Número Doc] para [dado novo], confirma?\"\n   - Exclusão: \"Irei excluir o pré-lançamento [Número Doc], confirma?\"\n\n4. MENSAGENS DE SUCESSO (Finalização):\n   - Criação:\n     \"Pré-lançamento no valor de [Valor] criado para a [Nome Obra/Centro].\n     Nº: [Número Doc].\"\n   \n   - Edição:\n     \"Pré-lançamento [Número Doc] editado conforme solicitado.\"\n\n   - Exclusão:\n     \"Pré-lançamento [Número Doc] excluído.\"\n\n---\n\n🚨 DIRETRIZES TÉCNICAS E LÓGICA (BACKEND - CRÍTICO) 🚨\n\n1. LEI DOS IDs (INTEGRIDADE REFERENCIAL):\n   - É ESTRITAMENTE PROIBIDO inventar ou usar texto em campos de ID.\n   - Campos `id_` (id_obra, id_fornecedor, etc.) SÓ ACEITAM NÚMEROS INTEIROS (IDs internos obtidos via Tool).\n   - FLUXO: Receber Nome -> CHAMAR TOOL DE BUSCA -> Pegar ID no JSON -> Usar ID no payload.\n   - Se a tool de busca não retornar nada, avise o usuário. NUNCA force um ID.\n\n1.1 TRATAMENTO DO NOME DA OBRA:\n\n   - Extração Inteligente: Se o usuário disser \"Obra Bacana\" ou \"Obra Casa do João\", ignore a palavra \"Obra\" e use apenas o nome próprio (Bacana, Casa do João) para realizar a busca na tool obras.\n   - Presunção de Verdade: Assuma que o nome fornecido é o correto. É PROIBIDO perguntar \"O nome é esse mesmo?\" ou \"Tem código?\".\n   - Pesquisa Silenciosa: Realize a busca apenas com o nome extraído. Só questione o usuário se a tool obras retornar que não encontrou nada.\n\n2. MAPEAMENTO OBRIGATÓRIO (CAMPO -> TOOL):\n   - `id_obra`: Chamar tool `obras` (se despesa de obra).\n   - `id_centro_custo`: Chamar tool `centro_custo` (se despesa própria).\n   - `id_fornecedor`: Chamar tool `fornecedor`.\n   - `id_conta_movimento`: Chamar tool `conta_bancaria`.\n   - `id_tipo_doc`: Chamar tool `tipo_doc`.\n\n3. REGRAS DE EDIÇÃO (UPDATE):\n   1. Usuário diz: \"Edita o lançamento 000411\".\n   2. AÇÃO: Chame `get_lancamentos` (filtre pelo número do documento visual).\n   3. RECUPERE: O ID INTERNO (oculto) desse lançamento.\n   4. EXECUÇÃO: Faça o MERGE. Mantenha os dados antigos que não mudaram e altere apenas o solicitado.\n\n4. TRATAMENTO DE CAMPOS OPCIONAIS (Payload):\n   - Se o usuário NÃO informar Fornecedor, Conta, Tipo de Doc ou Vencimento: O valor no payload deve ser `null`.\n   - Se o usuário NÃO informar Descrição ou Observação: NÃO envie null. Gere automaticamente um texto genérico e objetivo que combine com o contexto.\n     Exemplos: \"Pré-lançamento de despesa\", \"Despesa referente a [Nome da Obra]\", etc.\nNão cite esse tratamento de opcionais ao usuário, não diga que irá preencher com algo genérico.\n\n---\n\n🔄 FLUXO DE RACIOCÍNIO (STEP-BY-STEP)\n\nPASSO 1: IDENTIFICAÇÃO E BUSCA\nO usuário informou dados? Identifique as entidades (Obra, Fornecedor). Chame as tools de busca IMEDIATAMENTE para validar nomes e obter IDs internos.\n(Nota: Se a data for relativa como \"amanhã\", calcule a data final agora).\n\nPASSO 2: CONFIRMAÇÃO (RESUMO)\nCom os IDs validados e dados estruturados, mostre o RESUMO PARA CONFIRMAÇÃO (Script item 2).\n\nPASSO 3: EXECUÇÃO\nApós o \"Sim\" ou \"Pode lançar\":\n1. Chame a tool `criar_pre_lancamento` (ou editar/excluir).\n2. Aguarde o retorno da tool (que conterá o número do documento).\n3. Responda com a MENSAGEM DE SUCESSO (Script item 4)."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        -1136,
        -960
      ],
      "id": "7c0bc25c-7343-4df5-8096-279ca8064ef2",
      "name": "Pré-lançamento financeiro"
    },
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.body.chatImput }}",
        "options": {
          "systemMessage": "=CONTEXTO E PERSONA\nData Atual: {{ $now.toString() }}\nVocê é o Assistente do módulo Dia a Dia do sistema Obra Prima.\nSua comunicação deve ser humana, objetiva e profissional (estilo WhatsApp corporativo).\nEvite formatação excessiva (markdown complexo), símbolos, chaves, colchetes e etc. Use linguagem direta.\n\n🚨 REGRAS DE VISUALIZAÇÃO E FORMATO (FRONT-END) 🚨\n\n1. DATAS: Para o usuário, SEMPRE mostre no formato brasileiro: DD-MM-AAAA (ex: 15-03-2026).\n   - Internamente (nas tools), continue enviando YYYY-MM-DD.\n   - Cálculo de Datas: Se o usuário disser \"vencimento amanhã\" ou \"daqui 5 dias\", calcule a data baseada em {{ $now }} e assuma como verdade. Não pergunte \"Você quis dizer dia X?\". Apenas calcule e use.\n\n2. IDs e NÚMEROS:\n   - NUNCA mostre o ID interno do banco de dados (ex: 2596, UUIDs).\n   - O usuário só conhece o NÚMERO DO DOCUMENTO (ex: 000411). Use apenas este número nas conversas.\n\n3. CONTEXTO DE EDIÇÃO:\n   - Se, logo após uma criação ou interação, o usuário disser quiser editar, deletar, excluir ou anexar uma imagem sem especificar o Dia a Dia, assuma que ele fala do que acabou de ser tratado.\n\n---\n\n💬 SCRIPTS DE COMUNICAÇÃO (OBRIGATÓRIOS)\n\n1. AO INICIAR COLETA (Novo Dia a Dia):\n   \"Beleza, vamos criar esse Dia a Dia! Me informe por gentileza:\n   1 - Qual a Obra?\n   2 - Qual a mensagem?\n   3 - Deseja exibir ao cliente?\n\n   Fase da obra é opcional.\"\n\n2. RESUMO PARA CONFIRMAÇÃO (Antes de Criar):\n   Estrutura obrigatória:\n   \"Dia a Dia para a Obra nome da Obra.\n    Mensagem: \"mensagem\".\n\n    Posso enviar?\"\n\n3. CONFIRMAÇÃO PARA EDIÇÃO DE DIA A DIA/EXCLUSÃO DE DIA A DIA/ENVIO DE ANEXO/EXCLUSÃO DE ANEXO:\n   Seja direto.\n   - PARA EDIÇÃO DE DIA A DIA: \"Irei editar a mensagem do Dia a Dia para \"texto a ser enviado\", confirma?\n   - PARA EXCLUSÃO: \"Irei excluir o Dia a Dia, confirma?\"\n   - PARA ANEXO DE IMAGEM: \"Irei adicionar a/as imagem/ns ao Dia a Dia, confirma?\n   - PARA EXCLUSÃO DE IMAGEM: \"Irei excluir a imagem, confirma?\"\n\n4. MENSAGENS DE SUCESSO (Finalização):\n   - Criação:\n     \"Dia a Dia para a Obra nome da obra enviado.\n   \n   - Edição:\n     \"Dia a Dia para a obra nome da obra editado.\"\n\n   - Exclusão:\n     \"Dia a Dia para a obra nome da obra excluído.\"\n   \n   - Envio de anexo:\n     \"Imagem anexada ao Dia a Dia.\"\n\n   - Exclusão de anexo:\n     \"Imagem excluída.\"\n\n---\n\n🚨 DIRETRIZES TÉCNICAS E LÓGICA (BACKEND - CRÍTICO) 🚨\n\n1. LEI DOS IDs (INTEGRIDADE REFERENCIAL):\n   - É ESTRITAMENTE PROIBIDO inventar ou usar texto em campos de ID.\n   - Campos `id_` (id_obra e id_fase.) SÓ ACEITAM NÚMEROS INTEIROS (IDs internos obtidos via Tool).\n   - FLUXO: Receber Nome -> CHAMAR TOOL DE BUSCA -> Pegar ID no JSON -> Usar ID no payload.\n   - Se a tool de busca não retornar nada, avise o usuário. NUNCA force um ID.\n\n1.1 EXTRAÇÃO LIMPA DO NOME DA OBRA:\n   - Isolamento do Nome: Sempre que o usuário mencionar \"Obra [Nome]\", você deve ignorar a palavra \"Obra\" e realizar a busca na tool obras2 utilizando apenas o nome propriamente dito (ex: se disser \"Obra Verano\", busque por Verano).\n   - Presunção de Verdade: Assuma que o nome extraído é o correto. PROIBIDO perguntar \"Esse é o nome mesmo?\" ou \"Tem código?\".\n   - Critério de Busca: Use o nome direto. Só informe que não encontrou se o retorno da tool obras2 for vazio.\n\n2. MAPEAMENTO OBRIGATÓRIO (CAMPO -> TOOL):\n   - `id_obra`: Chamar tool `obras2`.\n   - `id_fase`: Chamar tool `fase_servico` \n\n3. REGRAS DE EDIÇÃO (UPDATE):\n   1. Usuário diz: \"Edita o Dia a Dia da Obra C455\".\n   2. Chame `obras2`.\n   3. RECUPERE O ID INTERNO dessa Obra.\n   4. Chame `buscar_dia_a_dia`\n   5. Recupere o ID interno desse Dia a Dia\n   6. Faça o MERGE. Mantenha os dados antigos que não mudaram e altere apenas o solicitado.\n\n4. Regras para anexar imagem  \n   1. Chame `buscar_dia_a_dia` para pegar o ID interno do Dia a Dia.\n\n5. Regras para excluir imagem\n   1. Chame `buscar_dia_a_dia` para pegar o ID interno do Dia a Dia.\n   2. Chame `buscar_anexos` para pegar o ID interno do anexo.\n\n6. Regras para buscar fase de serviço\n   1. Chame tool `obras2` para pegar o ID interno da obra.\n   2. Chame a tool `fase_servico` passando o id interno da Obra colhido do passo anterior. Pegue o id interno da fase de serviço.\n\n\n🔄 FLUXO DE RACIOCÍNIO (STEP-BY-STEP)\n\nPASSO 1: IDENTIFICAÇÃO E BUSCA\nO usuário informou dados? Identifique as entidades (Obra, Fase). Chame as tools de busca IMEDIATAMENTE para validar nomes e obter IDs internos.\n(Nota: Se a data for relativa como \"amanhã\", calcule a data final agora).\n\nPASSO 2: CONFIRMAÇÃO (RESUMO)\nCom os IDs validados e dados estruturados, mostre o RESUMO PARA CONFIRMAÇÃO (Script item 2).\n\nPASSO 3: EXECUÇÃO\nApós o \"Sim\" ou \"Pode lançar\":\n1. Chame a tool `criar_dia_a_dia` (ou editar/deletar/anexar/deletar anexo).\n2. Aguarde o retorno da tool (que conterá o número do documento).\n3. Responda com a MENSAGEM DE SUCESSO (Script item 4)."
        }
      },
      "type": "@n8n/n8n-nodes-langchain.agent",
      "typeVersion": 3,
      "position": [
        1120,
        -928
      ],
      "id": "37dd3d6c-8bcd-4954-85a8-5ef8df8d2093",
      "name": "Dia a dia"
    },
    {
      "parameters": {
        "content": "## WEBHOOKS - BANCO DE DADOS",
        "height": 80,
        "width": 1024,
        "color": 4
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        2976,
        -912
      ],
      "typeVersion": 1,
      "id": "739cfba4-2280-42be-900c-c1440fe20783",
      "name": "Sticky Note"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        7408,
        -640
      ],
      "id": "c41cb6d8-eca7-4807-93b1-0cdbdc688916",
      "name": "Respond to Webhook16"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "excluir_imagem_solicitacao",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        6624,
        -640
      ],
      "id": "f6ca7784-82ce-48e2-8412-449fda77f222",
      "name": "excluir imagem",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "method": "DELETE",
        "url": "=https://example.com/api/diadiaAnexos/{{ $json.body.id_anexo }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        7008,
        -640
      ],
      "id": "1e2923d5-6443-431e-a1b3-7c558a2f0cba",
      "name": "delete"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        7408,
        -320
      ],
      "id": "307f8ef3-24d0-4dfd-a7f2-0f0258d29865",
      "name": "Respond to Webhook17"
    },
    {
      "parameters": {
        "method": "DELETE",
        "url": "=https://example.com/api/solicitacaoItens/{{ $json.body.id_item }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        7008,
        -320
      ],
      "id": "5d1102fb-04de-44a7-a24a-099621b36df2",
      "name": "delete1"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "excluir_item_solicitacao",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        6624,
        -320
      ],
      "id": "67288a5a-612e-482d-b890-45225bf45d66",
      "name": "deletar item",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        7408,
        -480
      ],
      "id": "25ff585a-f33e-4418-a4fa-b1130af7c3fc",
      "name": "Respond to Webhook18"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "listar_iem_solicitacao",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        6624,
        -480
      ],
      "id": "c3afb9ea-e513-46c7-b427-6f2fafc2efeb",
      "name": "listar itens de uma solicitação",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        7408,
        -160
      ],
      "id": "d1f4c9bf-980c-4ba4-a9b6-9045878a0546",
      "name": "Respond to Webhook19"
    },
    {
      "parameters": {
        "method": "DELETE",
        "url": "=https://example.com/api/solicitacoes/{{ $json.headers.id_solicitacao }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        7008,
        -160
      ],
      "id": "c8d32fe5-4eb8-40d0-ac44-edcb07f78b20",
      "name": "delete2"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "excluir_solicitacao",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        6624,
        -160
      ],
      "id": "c4e4a3d2-9f52-43be-a6f3-cd0ed38bb06a",
      "name": "deletar solicitação",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        7408,
        0
      ],
      "id": "216d049d-8295-47d9-b439-cbd0119334b1",
      "name": "Respond to Webhook20"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "editar_solicitacao",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        6624,
        0
      ],
      "id": "1cf0b469-a79c-462a-92af-51f241b86997",
      "name": "editar solicitação",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "method": "PUT",
        "url": "=https://example.com/api/solicitacoes/{{ $json.body.id_solicitacao }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_obra",
              "value": "={{ $json.body.id_obra }}"
            },
            {
              "name": "id_usuario",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "necessidade",
              "value": "={{ $json.body.necessidade }}"
            },
            {
              "name": "descricao",
              "value": "={{ $json.body.descricao }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        7008,
        0
      ],
      "id": "3c2a3296-0f6b-4dfd-b88d-943534772ce4",
      "name": "put"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        7408,
        160
      ],
      "id": "3946ffb7-4ccb-480e-b877-dbf197811a5d",
      "name": "Respond to Webhook21"
    },
    {
      "parameters": {
        "method": "PUT",
        "url": "=https://example.com/api/solicitacaoItens/{{ $json.body.id_item }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_solicitacao",
              "value": "={{ $json.body.id_solicitacao }}"
            },
            {
              "name": "id_usuario",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "nome",
              "value": "={{ $json.body.nome }}"
            },
            {
              "name": "quantidade",
              "value": "={{ $json.body.quantidade }}"
            },
            {
              "name": "complemento",
              "value": "={{ $json.body.complemento }}"
            },
            {
              "name": "unidadeMedida",
              "value": "={{ $json.body.unidadeMedida }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        7008,
        160
      ],
      "id": "d4d36500-5bd5-4805-ba55-8e8cef9bdb50",
      "name": "put1"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "editar_item_solicitacao",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        6624,
        160
      ],
      "id": "0ce33aa3-ad22-4b7d-a1f2-1f93c872bef8",
      "name": "editar item de uma solicitação",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        7408,
        320
      ],
      "id": "33268584-d5f2-4d4a-bcc0-6992b73958fe",
      "name": "Respond to Webhook22"
    },
    {
      "parameters": {
        "url": "=https://example.com/api/solicitacoes/{{ $json.body.id_solicitacao }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "tipo",
              "value": "solicitacao"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        7008,
        320
      ],
      "id": "39c775d8-ec85-4286-aaf9-fc5dd9ef53d6",
      "name": "get1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        7408,
        480
      ],
      "id": "410b0794-c093-4d88-b8ef-55XXXXXXXXXXX",
      "name": "Respond to Webhook23"
    },
    {
      "parameters": {
        "url": "=https://example.com/api/solicitacaoAnexos/{{ $json.headers.id_solicitacao }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "tipo",
              "value": "solicitacao"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        7008,
        480
      ],
      "id": "7c0477ad-57a1-4bff-b8b3-b2032928ca4a",
      "name": "get2"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "get_anexos",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        6624,
        480
      ],
      "id": "28ea50bf-ff7d-4fe9-a8cf-6d284e3b6107",
      "name": "buscar anexos de uma solicitação",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        6192,
        -480
      ],
      "id": "4476a7d3-1944-4cf2-b2f0-6861dea6b2e1",
      "name": "Respond to Webhook24"
    },
    {
      "parameters": {
        "method": "DELETE",
        "url": "=https://example.com/api/lancamentos/{{ $json.body.id_pre_lancamento }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "id_usuario",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "id_matriz",
              "value": "={{ $json.headers.id_matriz }}"
            },
            {
              "name": "tipo_financeiro",
              "value": "={{ $json.headers.tipo_financeiro }}"
            },
            {
              "name": "tipo_recorrencia",
              "value": "={{ $json.headers.tipo_recorrencia }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        5808,
        -480
      ],
      "id": "5ca3c296-4b19-410f-bb03-1df35fb689d7",
      "name": "delete3"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "deleter_pre_lancamento",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        5408,
        -480
      ],
      "id": "c067aa32-5d7f-40b8-8205-a7c1b5a3c722",
      "name": "deletar pré-lançamento",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "method": "PUT",
        "url": "=https://example.com/api/lancamentos/{{ $('editar pré-lançamento').item.json.body.id_lancamento }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('editar pré-lançamento').item.json.body.UsuarioID }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "origem_lancamento",
              "value": "lancamento"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"MatrizID\": {{ $json.body.MatrizID }},\n    \"UsuarioID\": {{ $json.body.UsuarioID }},\n    \"TipoFinanceiro\": 5,\n    \"SalvarPreLancamento\": true, \n    \"MoedaCasasDecimais\": 2,\n    \"objLancamento\": {\n        \"data_vencimento\": \"{{ $json.body.data_vencimento }}\",\n        \"descricao\": \"{{ $json.body.descricao }}\",\n        \"despesa\": \"{{ $json.body.despesa }}\", \n        \"id_conta_movimento\": {{ $json.body.id_conta_movimento }},\n        \"id_empresa\": {{ $json.body.id_empresa }},\n        \"id_obra\": {{ $json.body.id_obra }},\n        \"observacao\": \"{{ $json.body.observacao }}\",\n        \"tipo_doc\": {{ $json.body.id_tipo_doc }},\n        \"valor\": {{ $json.body.valor }},\n        \"id_forma_pagamento\": null,\n        \"id_ordem_compra\": null, \n        \"criador\": {\n            \"id_pessoa\": {{ $json.body.UsuarioID }}\n        },\n        \"editor\": {\n            \"id_pessoa\": {{ $json.body.UsuarioID }}\n        },\n        \"fornecedor\": {\n            \"id_fornecedor\": {{ $json.body.id_fornecedor }},\n            \"nome\": null\n        }\n    }\n} ",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        5808,
        -640
      ],
      "id": "713c033f-c392-4295-8ea5-e3e78db9f7c9",
      "name": "put2"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://example.com/api/lancamentos",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.body.UsuarioID }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "origem_lancamento",
              "value": "lancamento"
            }
          ]
        },
        "sendBody": true,
        "specifyBody": "json",
        "jsonBody": "={\n    \"MatrizID\": {{ $json.body.MatrizID }},\n    \"UsuarioID\": {{ $json.body.UsuarioID }},\n    \"TipoFinanceiro\": 5,\n    \"SalvarPreLancamento\": true, \n    \"MoedaCasasDecimais\": 2,\n    \"objLancamento\": {\n        \"data_vencimento\": \"{{ $json.body.data_vencimento }}\",\n        \"descricao\": \"{{ $json.body.descricao }}\",\n        \"despesa\": \"{{ $json.body.despesa }}\", \n        \"id_conta_movimento\": {{ $json.body.id_conta_movimento }},\n        \"id_empresa\": {{ $json.body.id_empresa }},\n        \"id_obra\": {{ $json.body.id_obra }},\n        \"observacao\": \"{{ $json.body.observacao }}\",\n        \"tipo_doc\": {{ $json.body.id_tipo_doc }},\n        \"valor\": {{ $json.body.valor }},\n        \"id_forma_pagamento\": null,\n        \"id_ordem_compra\": null, \n        \"criador\": {\n            \"id_pessoa\": {{ $json.body.UsuarioID }}\n        },\n        \"editor\": {\n            \"id_pessoa\": {{ $json.body.UsuarioID }}\n        },\n        \"fornecedor\": {\n            \"id_fornecedor\": {{ $json.body.id_fornecedor }},\n            \"nome\": null\n        }\n    } \n} ",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        5808,
        -800
      ],
      "id": "915775da-62bc-4528-8cda-31aef41f0e8e",
      "name": "post"
    },
    {
      "parameters": {
        "toolDescription": "Chame essa tool quando o usuário quiser deletar um pré-lançamento, sempre envie o id do pré-lançamento (consulte na tool 'get_lancamentos'",
        "method": "POST",
        "url": "https://example.com/webhook/deleter_pre_lancamento",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('agente_lancamento').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "id_usuario",
              "value": "={{ $('agente_lancamento').item.json.body.pessoa }}"
            },
            {
              "name": "id_matriz",
              "value": "={{ $('agente_lancamento').item.json.body.matriz }}"
            },
            {
              "name": "tipo_financeiro",
              "value": "=5"
            },
            {
              "name": "tipo_recorrencia",
              "value": "unico"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_pre_lancamento",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `id do pré-lançamento (consulte na tool 'get_lancamentos')`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -64,
        -304
      ],
      "id": "834ab0d5-fd1b-453a-9529-1493455a2a8e",
      "name": "deletar_pré_lançamento1"
    },
    {
      "parameters": {
        "url": "=https://example.com/api/solicitacaoItens/{{ $json.body.id_solicitacao }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "tipo",
              "value": "solicitacao"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        7008,
        -480
      ],
      "id": "b8e26780-34e7-4065-aed5-072ce9f22622",
      "name": "get3"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "situacao",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        6624,
        320
      ],
      "id": "97b1bf2f-1c25-449d-93cf-d1efde2a987d",
      "name": "consultar situação das solicitações",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "toolDescription": "Uitlize para criar um pré-lançamento.",
        "method": "POST",
        "url": "https://example.com/webhook/criar_pre_lançamento",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "MatrizID",
              "value": "={{ $('agente_lancamento').item.json.body.matriz }}"
            },
            {
              "name": "UsuarioID",
              "value": "={{ $('agente_lancamento').item.json.body.pessoa }}"
            },
            {
              "name": "data_vencimento",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters2_Value', `caso o usuário não tenha informado, preencha com \"null\"`, 'string') }}"
            },
            {
              "name": "descricao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters3_Value', `caso o usuário não tenha informado, preencha com algo genérico`, 'string') }}"
            },
            {
              "name": "despesa",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters4_Value', `preencha com \"o\" para Obra e \"p\" para Própria`, 'string') }}"
            },
            {
              "name": "id_conta_movimento",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters5_Value', `caso o usuário não tenha informado conta/banco, preencha com \"null\"`, 'string') }}"
            },
            {
              "name": "id_empresa",
              "value": "={{ $('agente_lancamento').item.json.body.empresa}}"
            },
            {
              "name": "id_obra",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters7_Value', `id da Obra/Centro de custo informado pelo usuário, busque na tool 'obra' caso a despesa seja de obra, ou na tool 'centro_custo' caso a despesa seja própria.`, 'string') }}"
            },
            {
              "name": "observacao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters8_Value', `caso o usuário não tenha informado, preencha com algo genérico`, 'string') }}"
            },
            {
              "name": "id_tipo_doc",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters9_Value', `caso o usuário não tenha informado o tipo de documento, preencha com \"null\"\n`, 'string') }}"
            },
            {
              "name": "valor",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters10_Value', `valor informado pelo usuário, ex: 150`, 'string') }}"
            },
            {
              "name": "id_fornecedor",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters11_Value', `caso o usuário não tenha informado fornecedor, preencha com \"null\"\nse ele tiver informado, busque o id na tool 'fornecedor'`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -512,
        -128
      ],
      "id": "adbc46ac-4c2b-4710-b030-a5693e25f881",
      "name": "criar_pre_lancamento"
    },
    {
      "parameters": {
        "toolDescription": "Utilize para editar um pré-lançamento. Requer merge dos dados atuais com os novos.\nNão altere os valores que não precisam ser alterados, apenas repita-os.",
        "method": "POST",
        "url": "https://example.com/webhook/editar_pre_lançamento",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "MatrizID",
              "value": "={{ $('agente_lancamento').item.json.body.matriz }}"
            },
            {
              "name": "UsuarioID",
              "value": "={{ $('agente_lancamento').item.json.body.pessoa }}"
            },
            {
              "name": "data_vencimento",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters2_Value', ``, 'string') }}"
            },
            {
              "name": "descricao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters3_Value', ``, 'string') }}"
            },
            {
              "name": "despesa",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters4_Value', ``, 'string') }}"
            },
            {
              "name": "id_conta_movimento",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters5_Value', ``, 'string') }}"
            },
            {
              "name": "id_empresa",
              "value": "={{ $('agente_lancamento').item.json.body.empresa}}"
            },
            {
              "name": "id_obra",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters7_Value', ``, 'string') }}"
            },
            {
              "name": "observacao",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters8_Value', ``, 'string') }}"
            },
            {
              "name": "id_tipo_doc",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters9_Value', ``, 'string') }}"
            },
            {
              "name": "valor",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters10_Value', ``, 'string') }}"
            },
            {
              "name": "id_fornecedor",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters11_Value', ``, 'string') }}"
            },
            {
              "name": "id_lancamento",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters12_Value', `id do lançamento, caso não saiba verifique na tool 'get_lancamentos'\n`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        -272,
        -208
      ],
      "id": "526fa073-e4b1-4aa0-aa35-df7333ad07c7",
      "name": "editar_pre_lançamento"
    },
    {
      "parameters": {
        "toolDescription": "Busca o ID de uma conta bancária",
        "url": "https://example.com/webhook/banco",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "empresa",
              "value": "={{ $('agente_lancamento').item.json.body.empresa }}"
            },
            {
              "name": "usuario",
              "value": "={{ $('agente_lancamento').item.json.body.pessoa }}"
            },
            {
              "name": "nome",
              "value": "={{ $fromAI('parameters2_Value', `nome da obra, termo que será usado para pesquisar`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        -1744,
        -224
      ],
      "id": "590ccbe1-6891-4990-bc02-1ab04913fdd0",
      "name": "conta_bancaria"
    },
    {
      "parameters": {
        "toolDescription": "Utilize para verificar o ID interno de uma fase de serviço, requer id interno da obra, verifique na tool 'obras'.",
        "url": "https://example.com/webhook/fase_servico",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "empresa",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.empresa }}"
            },
            {
              "name": "usuario",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.pessoa }}"
            },
            {
              "name": "nome",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters2_Value', `nome da fase do serviço, termo que será usado para pesquisar`, 'string') }}"
            },
            {
              "name": "id_obra",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters3_Value', `id interno da obra - tool 'obras'`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        448,
        -352
      ],
      "id": "72f07170-ece3-47af-9905-3b53791cd761",
      "name": "fase_servico"
    },
    {
      "parameters": {
        "toolDescription": "Utilize para buscar o dia a dia de uma Obra específica, requer id da Obra (tool obras2)",
        "method": "POST",
        "url": "https://example.com/webhook/get_dia_a_dia",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "tipo",
              "value": "obra"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_obra",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `id interno da obra - tool 'obras2'`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        800,
        -112
      ],
      "id": "4648cc54-0982-40ad-b17c-57f0c5ccd063",
      "name": "buscar_dia_a_dia"
    },
    {
      "parameters": {
        "toolDescription": "Utilize para lançar um dia a dia.\nRequer id interno da obra;\nCaso o usuário deseje exibir para o cliente exibirCliente = true, caso não false;\nCaso o usuário tenha informado fase, requer id interno da fase.",
        "method": "POST",
        "url": "https://example.com/webhook/criar_diaadia",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_obra",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `id da obra`, 'string') }}"
            },
            {
              "name": "id_empresa",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.empresa }}"
            },
            {
              "name": "id_pessoa",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.pessoa }}"
            },
            {
              "name": "exibirCliente",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters3_Value', `caso o usuário deseje exibir, preencha com \"true\"\ncaso não, preencha com \"false\"`, 'string') }}"
            },
            {
              "name": "texto",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters4_Value', `texto/mensagem informada pelo cliente`, 'string') }}"
            },
            {
              "name": "id_fase",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters5_Value', `caso o usuário não tenha informado fase, preencha com \"null\"`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        1024,
        -16
      ],
      "id": "3398d241-fb4f-4e69-bbf2-c61389cb3dc6",
      "name": "criar_dia_a_dia"
    },
    {
      "parameters": {
        "toolDescription": "Utilize para editar um dia a dia, requer merge dos dados atuais com os novos.",
        "method": "POST",
        "url": "https://example.com/webhook/editar_diaadia",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_obra",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', ``, 'string') }}"
            },
            {
              "name": "id_empresa",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.empresa }}"
            },
            {
              "name": "id_pessoa",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.pessoa }}"
            },
            {
              "name": "exibirCliente",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters3_Value', `true ou false`, 'string') }}"
            },
            {
              "name": "texto",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters4_Value', `mensagem do dia a dia`, 'string') }}"
            },
            {
              "name": "id_fase",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters5_Value', ``, 'string') }}"
            },
            {
              "name": "id_diaDia",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters6_Value', `preencha com o id do dia a dia`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.2,
      "position": [
        1264,
        112
      ],
      "id": "aae32535-3969-4b54-b408-aa79157fbf17",
      "name": "editar_dia_a_dia"
    },
    {
      "parameters": {
        "toolDescription": "Utilize para deletar um dia a dia, requer id do Dia a Dia.",
        "method": "POST",
        "url": "https://example.com/webhook/deletar_dia_a_dia",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "id_usuario",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.pessoa }}"
            },
            {
              "name": "id_empresa",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.empresa }}"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_diaadia",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `id interno do Dia a Dia `, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        1488,
        0
      ],
      "id": "df7315b6-259e-4360-b1c2-3005e302245d",
      "name": "deletar_dia_a_dia"
    },
    {
      "parameters": {
        "toolDescription": "Utilize para buscar os anexos de um dia a dia específico, requer id do Dia a Dia.",
        "method": "POST",
        "url": "https://example.com/webhook/get_anexos_dia_a_dia",
        "sendQuery": true,
        "queryParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "tipo",
              "value": "diaadia"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_diaadia",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `id interno do Dia a Dia`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        1712,
        -112
      ],
      "id": "77ac6f0f-6b90-4493-972c-36352744ad38",
      "name": "buscar_anexos"
    },
    {
      "parameters": {
        "toolDescription": "Utilize para adicionar um anexo à um dia a dia",
        "method": "POST",
        "url": "https://example.com/webhook/adicionar_anexo_dia_a_dia",
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.pessoa }}"
            },
            {
              "name": "anexoUrl",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters1_Value', `url exata do anexo`, 'string') }}"
            },
            {
              "name": "id_diaDia",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters2_Value', `ID DO DIA A DIA`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        1888,
        -224
      ],
      "id": "4bf1021e-ad74-4e35-b4fa-2d69309cd60b",
      "name": "adicionar_anexo"
    },
    {
      "parameters": {
        "toolDescription": "Utilize para deletar um anexo de um dia a dia, requer id do anexo.",
        "method": "POST",
        "url": "https://example.com/webhook/deletar_anexo_dia_a_dia",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $('agente_dia_a_dia1').item.json.body.pessoa }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            }
          ]
        },
        "sendBody": true,
        "bodyParameters": {
          "parameters": [
            {
              "name": "id_anexo",
              "value": "={{ /*n8n-auto-generated-fromAI-override*/ $fromAI('parameters0_Value', `id interno do anexo`, 'string') }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequestTool",
      "typeVersion": 4.3,
      "position": [
        2064,
        -320
      ],
      "id": "2f44299f-5fe1-4c75-ace8-9d673ca6bea0",
      "name": "deletar_anexo1"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        4976,
        -320
      ],
      "id": "7a0c6c98-2e7b-42b1-a38c-b03af88cb73c",
      "name": "Respond to Webhook25"
    },
    {
      "parameters": {
        "url": "=https://example.com/api/diadias/{{ $json.body.id_obra }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "tipo",
              "value": "obra"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        4576,
        -320
      ],
      "id": "644b4d16-5794-4ff2-8273-381236dc288b",
      "name": "get"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "get_dia_a_dia",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        4192,
        -320
      ],
      "id": "16ce7a82-1ba0-4a62-82de-89a483a32341",
      "name": "listar dia a dia",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        4976,
        -160
      ],
      "id": "131c0822-891d-4d2a-ad54-0210b8e78355",
      "name": "Respond to Webhook26"
    },
    {
      "parameters": {
        "method": "DELETE",
        "url": "=https://example.com/api/diadias/{{ $json.body.id_diaadia }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "id_usuario",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "id_empresa",
              "value": "={{ $json.headers.id_empresa }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        4576,
        -160
      ],
      "id": "4da21701-2b24-4fc6-8f37-0a38c660e71e",
      "name": "delete4"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "deletar_dia_a_dia",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        4192,
        -160
      ],
      "id": "21c884fe-58bc-4bc9-80e8-549c025d5018",
      "name": "deletar dia a dia",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        4976,
        0
      ],
      "id": "e2056384-9e73-41d4-8de1-06849ff7ce08",
      "name": "Respond to Webhook27"
    },
    {
      "parameters": {
        "url": "=https://example.com/api/diadiaAnexos/{{ $json.body.id_diaadia }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.query.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "tipo",
              "value": "diaadia"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        4576,
        0
      ],
      "id": "d285dacf-13fe-42d0-ae96-494e97d95250",
      "name": "get4"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "get_anexos_dia_a_dia",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        4192,
        0
      ],
      "id": "c86a4dfb-6dfa-4c67-bc20-762cc7ed689f",
      "name": "listar dia a dia1",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "options": {}
      },
      "type": "n8n-nodes-base.respondToWebhook",
      "typeVersion": 1.4,
      "position": [
        4976,
        144
      ],
      "id": "389315f2-8a7d-4708-a744-e2bfc7f24e47",
      "name": "Respond to Webhook28"
    },
    {
      "parameters": {
        "method": "DELETE",
        "url": "=https://example.com/api/diadiaAnexos/{{ $json.body.id_anexo }}",
        "authentication": "genericCredentialType",
        "genericAuthType": "httpCustomAuth",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "id_acesso",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "tipo_acesso",
              "value": "app_usuario"
            },
            {
              "name": "id_usuario",
              "value": "={{ $json.headers.id_acesso }}"
            },
            {
              "name": "id_empresa",
              "value": "={{ $json.headers.id_empresa }}"
            }
          ]
        },
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.3,
      "position": [
        4576,
        144
      ],
      "id": "c8540569-e6fb-4fc0-900e-7d1dc32bdd7f",
      "name": "delete5"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "deletar_anexo_dia_a_dia",
        "responseMode": "responseNode",
        "options": {}
      },
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 2.1,
      "position": [
        4192,
        144
      ],
      "id": "f7eb259b-06e8-43fe-a2f3-cea6cc13be47",
      "name": "deletar anexo dia a dia",
      "webhookId": "REDACTED_WEBHOOK_ID"
    },
    {
      "parameters": {
        "content": "## AGENTE PRÉ-LANÇAMENTO\n\n",
        "height": 80,
        "width": 352
      },
      "type": "n8n-nodes-base.stickyNote",
      "position": [
        -1904,
        -1136
      ],
      "typeVersion": 1,
      "id": "6c888ed5-fe74-4039-9ec1-00d2a0d91f29",
      "name": "Sticky Note8"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        3296,
        160
      ],
      "id": "862caedf-fa3a-4ddb-91f2-36760dd3abd6",
      "name": "Microsoft SQL8"
    },
    {
      "parameters": {
        "operation": "executeQuery",
        "query": "-- SQL QUERY REDACTED. Provide your own query and credentials."
      },
      "type": "n8n-nodes-base.microsoftSql",
      "typeVersion": 1.1,
      "position": [
        3520,
        160
      ],
      "id": "027908ea-ac37-4f44-8c6b-b68326af6c23",
      "name": "Microsoft SQL9"
    }
  ],
  "pinData": {
    "GET Solicitações - by User": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-692f2b52-7eb2201d07a2a26b6df8338f",
            "content-length": "32",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "empresa": 51810,
            "usuario": 1084
          },
          "webhookUrl": "https://example.com/webhook/get_solicitacoes_by_user",
          "executionMode": "production"
        }
      }
    ],
    "GET fornecedor": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-69398131-3fa40b8461c9c5bf1c105184",
            "content-length": "18",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "nome": "1fornecedor"
          },
          "webhookUrl": "https://example.com/webhook/fornecedor",
          "executionMode": "production"
        }
      }
    ],
    "GET tipo_doc": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-69385ff6-27dd22d55XXXXXXXXXXXba5db90",
            "content-length": "22",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "nome": "Cheque"
          },
          "webhookUrl": "https://example.com/webhook/obras",
          "executionMode": "production"
        }
      }
    ],
    "criar dia a dia1": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6942f418-1d82c4d04a41207d1a2d6e6f",
            "content-length": "132",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_obra": "1469",
            "id_empresa": 51810,
            "id_pessoa": 1084,
            "exibirCliente": "true",
            "texto": "teste fluxo n8n - dia a dia",
            "id_fase": "null"
          },
          "webhookUrl": "https://example.com/webhook/criar_diaadia",
          "executionMode": "production"
        }
      }
    ],
    "GET fase serviço": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-69385ff6-27dd22d55XXXXXXXXXXXba5db90",
            "content-length": "22",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "nome": "Cheque"
          },
          "webhookUrl": "https://example.com/webhook/obras",
          "executionMode": "production"
        }
      }
    ],
    "adicionar anexo1": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-69458c84-7a8ccfc916be2fdd418ae847",
            "content-length": "214",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_acesso": 1084,
            "anexoUrl": "https://ouvidoria.tce.pe.gov.br/wp-content/uploads/2022/09/tce-04-Gestao-Publica-Nuthawut.jpg",
            "nome": "1171",
            "id_diaDia": "imagem"
          },
          "webhookUrl": "https://example.com/webhook/adicionar_anexo_dia_a_dia",
          "executionMode": "production"
        }
      }
    ],
    "GET centro_custo": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-694ac7b8-00e8c74e08cc55XXXXXXXXXXXc4",
            "content-length": "70",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "empresa": 51810,
            "usuario": 1084,
            "nome": "admnistrativo",
            "matriz": 51810
          },
          "webhookUrl": "https://example.com/webhook/centro_custo",
          "executionMode": "production"
        }
      }
    ],
    "excluir imagem": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6977d283-348a16a712feb39e50264751",
            "content-length": "19",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_anexo": "2270"
          },
          "webhookUrl": "https://example.com/webhook/excluir_imagem_pre_lancamento",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "deletar item": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6977d283-348a16a712feb39e50264751",
            "content-length": "19",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_anexo": "2270"
          },
          "webhookUrl": "https://example.com/webhook/excluir_imagem_pre_lancamento",
          "executionMode": "production"
        }
      }
    ],
    "editar solicitação": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6977d283-348a16a712feb39e50264751",
            "content-length": "19",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_anexo": "2270"
          },
          "webhookUrl": "https://example.com/webhook/excluir_imagem_pre_lancamento",
          "executionMode": "production"
        }
      }
    ],
    "editar item de uma solicitação": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6977d283-348a16a712feb39e50264751",
            "content-length": "19",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_anexo": "2270"
          },
          "webhookUrl": "https://example.com/webhook/excluir_imagem_pre_lancamento",
          "executionMode": "production"
        }
      }
    ],
    "deletar pré-lançamento": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6977d283-348a16a712feb39e50264751",
            "content-length": "19",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_anexo": "2270"
          },
          "webhookUrl": "https://example.com/webhook/excluir_imagem_pre_lancamento",
          "executionMode": "production"
        }
      }
    ],
    "deletar solicitação": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6979269a-1b19359d5b55ce2946cefc1d",
            "content-length": "0",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "id_solicitacao": "1262",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {},
          "webhookUrl": "https://example.com/webhook/excluir_solicitacao",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "listar itens de uma solicitação": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-697a5106-2da8b7a7507e6d927a21429f",
            "content-length": "25",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "tipo": "solicitacao",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_solicitacao": "1268"
          },
          "webhookUrl": "https://example.com/webhook/listar_iem_solicitacao",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "anexar imagem": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-697a5c17-790f66c044058f5933f1e438",
            "content-length": "203",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_acesso": 1084,
            "imageUrl": "https://f004.backblazeb2.com/file/temp-file-download/instances/3CD4239D28F3D051611C3E9E78E3C10C/3EB04343F57FA34B27F765/TQ5A8mN0Ol7sdL8U3W8T4w==.jpg",
            "id_solicitacao": "1269"
          },
          "webhookUrl": "https://example.com/webhook/anexar_imagem_solicacao",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "consultar situação das solicitações": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-697bbcc4-6b4bb876421726fa77117a77",
            "content-length": "25",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "tipo": "solicitacao",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_solicitacao": "1271"
          },
          "webhookUrl": "https://example.com/webhook/situacao",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "buscar anexos de uma solicitação": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-697bc4c8-431e3ead2f7e5cbb7619b08f",
            "content-length": "0",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "tipo": "solicitacao",
            "id_solicitacao": "1273",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {},
          "webhookUrl": "https://example.com/webhook/get_anexos",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "Webhook": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "18.231.88.64",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-69809f97-39a8319a359be21e3756c3e0",
            "content-length": "853",
            "content-type": "application/json",
            "accept": "*/*",
            "accept-language": "en-US,en;q=0.5",
            "authorization": "Bearer",
            "user-agent": "Mozilla/4.0 (compatible; Win32; WinHttp.WinHttpRequest.5)"
          },
          "params": {},
          "query": {},
          "body": {
            "isStatusReply": false,
            "chatLid": "55XXXXXXXXXXX@lid",
            "connectedPhone": "55XXXXXXXXXXX",
            "waitingMessage": false,
            "isEdit": false,
            "isGroup": false,
            "isNewsletter": false,
            "instanceId": "3CD4239D28F3D051611C3E9E78E3C10C",
            "messageId": "3EB00CE7F7F013E017B615",
            "phone": "55XXXXXXXXXXX",
            "fromMe": false,
            "momment": 1770037126000,
            "status": "RECEIVED",
            "chatName": "Daiane Mendes",
            "senderPhoto": null,
            "senderName": "Daiane Mendes",
            "photo": "https://pps.whatsapp.net/v/t61.24694-24/550736346_55XXXXXXXXXXX_55XXXXXXXXXXX_n.jpg?ccb=11-4&oh=01_Q5Aa3gFvVJaTc6qAWIzU2IYZi-abq7GxE97q2qquKSNdfus_-Q&oe=698DC253&_nc_sid=5e03e0&_nc_cat=101",
            "broadcast": false,
            "participantLid": null,
            "forwarded": false,
            "type": "ReceivedCallback",
            "fromApi": false,
            "text": {
              "message": "oi quero fazer um financeiro"
            },
            "_traceContext": {
              "traceId": "b1850a67674bc2e4931eca8b10087fc8",
              "spanId": "26b9270ca4e167f3"
            }
          },
          "webhookUrl": "https://example.com/webhook/receive-whats-primo",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "agente_lancamento": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6980af63-062f4c9213bc4bc459778e4d",
            "content-length": "118",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "empresa": 51810,
            "matriz": 51810,
            "pessoa": 1084,
            "chatImput": "[\"sim\"]",
            "empresas_acesso": 51810,
            "matrizes_acesso": 51810
          },
          "webhookUrl": "https://example.com/webhook/pre_lancamento",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "criar pré-lançamento": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6980c93c-79f158c61c9fe95c43cc9fca",
            "content-length": "273",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "MatrizID": 51810,
            "UsuarioID": 1084,
            "data_vencimento": "15/03/2026",
            "descricao": "despesa da obra c455",
            "despesa": "o",
            "id_conta_movimento": "null",
            "id_empresa": 51810,
            "id_obra": "1472",
            "observacao": "despesa da obra c455",
            "id_tipo_doc": "null",
            "valor": "125",
            "id_fornecedor": "null"
          },
          "webhookUrl": "https://example.com/webhook/criar_pre_lançamento",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "editar pré-lançamento": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6980cf49-0ac39a7417368d5b4e6952ff",
            "content-length": "293",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "MatrizID": 51810,
            "UsuarioID": 1084,
            "data_vencimento": "2026-04-03",
            "descricao": "despesa da obra c455",
            "despesa": "o",
            "id_conta_movimento": "null",
            "id_empresa": 51810,
            "id_obra": "1472",
            "observacao": "despesa da obra c455",
            "tipo_doc": "null",
            "valor": "125",
            "id_fornecedor": "null",
            "id_lancamento": "2595"
          },
          "webhookUrl": "https://example.com/webhook/editar_pre_lançamento",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "listar dia a dia": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-697bbcc4-6b4bb876421726fa77117a77",
            "content-length": "25",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "tipo": "solicitacao",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_solicitacao": "1271"
          },
          "webhookUrl": "https://example.com/webhook/situacao",
          "executionMode": "production"
        }
      }
    ],
    "deletar dia a dia": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6977d283-348a16a712feb39e50264751",
            "content-length": "19",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_anexo": "2270"
          },
          "webhookUrl": "https://example.com/webhook/excluir_imagem_pre_lancamento",
          "executionMode": "production"
        }
      }
    ],
    "deletar anexo dia a dia": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6977d283-348a16a712feb39e50264751",
            "content-length": "19",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "token": "TQBEXhcSDHxbonG",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "id_anexo": "2270"
          },
          "webhookUrl": "https://example.com/webhook/excluir_imagem_pre_lancamento",
          "executionMode": "production"
        }
      }
    ],
    "agente_dia_a_dia1": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-6981189b-0354db9d43ae3fcc03418a40",
            "content-length": "119",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "empresa": 51810,
            "matriz": 51810,
            "pessoa": 1084,
            "chatImput": "[\"muda a exibição, coloca pra não exibir ao cliente\"]"
          },
          "webhookUrl": "https://example.com/webhook/dia_a_dia",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "listar dia a dia1": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-69811d9d-4e487b3445bb5fef50c9349d",
            "content-length": "21",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {
            "id_acesso": "1084",
            "tipo_acesso": "app_usuario",
            "tipo": "diaadia"
          },
          "body": {
            "id_diaadia": "1179"
          },
          "webhookUrl": "https://example.com/webhook/get_anexos_dia_a_dia",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "GET obras": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-698b71a8-067ef8994151fb910077e356",
            "content-length": "47",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "empresa": 51810,
            "usuario": 23,
            "nome": "Convida"
          },
          "webhookUrl": "https://example.com/webhook/get_obras",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ],
    "Agente Solicitações1": [
      {
        "json": {
          "headers": {
            "x-forwarded-for": "34.207.19.99",
            "x-forwarded-proto": "https",
            "x-forwarded-port": "443",
            "host": "dev-n8n.01tec.com.br",
            "x-amzn-trace-id": "Root=1-698b907c-565482f1744dddd13b24105d",
            "content-length": "109",
            "accept": "application/json,text/html,application/xhtml+xml,application/xml,text/*;q=0.9, image/*;q=0.8, */*;q=0.7",
            "content-type": "application/json",
            "user-agent": "axios/1.12.0",
            "accept-encoding": "gzip, compress, deflate, br"
          },
          "params": {},
          "query": {},
          "body": {
            "empresa": 51810,
            "matriz": 51810,
            "pessoa": 23,
            "chatImput": "[\"Isso\",\"A descrição é material elétrico\"]"
          },
          "webhookUrl": "https://example.com/webhook/agente_solicitacao_compra",
          "executionMode": "production"
        },
        "pairedItem": {
          "item": 0
        }
      }
    ]
  },
  "connections": {
    "Limit": {
      "main": [
        [
          {
            "node": "Interface",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Nono Dígito": {
      "main": [
        [
          {
            "node": "GET User by Phone",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model1": {
      "ai_languageModel": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "GET obras": {
      "main": [
        [
          {
            "node": "Microsoft SQL",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GET Solicitações - by User": {
      "main": [
        [
          {
            "node": "Microsoft SQL2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Webhook": {
      "main": [
        [
          {
            "node": "Switch2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If tem Message": {
      "main": [
        [
          {
            "node": "Push Buffer1",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "Get isBlocked?": {
      "main": [
        [
          {
            "node": "Daiane/Maressa/Daniel",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch1": {
      "main": [
        [
          {
            "node": "Trata Mensagem",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Analisa imagem - Triagem",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Download audio",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Analisa documento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Download audio": {
      "main": [
        [
          {
            "node": "Transcreve Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Transcreve Audio": {
      "main": [
        [
          {
            "node": "Trata Audio",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Campos Whatsapp": {
      "main": [
        [
          {
            "node": "If tem Message",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Chat | Whats": {
      "main": [
        [
          {
            "node": "Nono Dígito",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Wait3": {
      "main": [
        [
          {
            "node": "get messages buffer2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get messages buffer2": {
      "main": [
        [
          {
            "node": "If sem novas msgs",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If sem novas msgs": {
      "main": [
        [
          {
            "node": "Msgs Whats",
            "type": "main",
            "index": 0
          }
        ],
        []
      ]
    },
    "Redis1": {
      "main": [
        [
          {
            "node": "Chat | Whats",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Push Buffer1": {
      "main": [
        [
          {
            "node": "Wait3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Msgs Whats": {
      "main": [
        [
          {
            "node": "Redis1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trata Audio": {
      "main": [
        [
          {
            "node": "Campos Whatsapp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trata Mensagem": {
      "main": [
        [
          {
            "node": "Campos Whatsapp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Switch2": {
      "main": [
        [
          {
            "node": "chave block",
            "type": "main",
            "index": 0
          }
        ],
        [],
        [
          {
            "node": "Get isBlocked?",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Dados Webhook": {
      "main": [
        [
          {
            "node": "Switch1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Microsoft SQL": {
      "main": [
        [
          {
            "node": "Respond to Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Microsoft SQL2": {
      "main": [
        [
          {
            "node": "Respond to Webhook2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GET User by Phone": {
      "main": [
        [
          {
            "node": "GET empresas/matrizes",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "obras1": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "criar_solicitacao1": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "inserir_item_solicitacao1": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Agente Solicitações1": {
      "main": [
        [
          {
            "node": "Solicitação de compras",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Memory1": {
      "ai_memory": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "deletar_item_solicitacao": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "listar_item_solicitacao": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "listar_solicitacoes1": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "deletar_solicitacao": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "atualizar_item_solicitacao": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "editar_solicitacao": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "consultar_situacao": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "chave block": {
      "main": [
        []
      ]
    },
    "get_anexos": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "deletar_anexo": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Daiane/Maressa/Daniel": {
      "main": [
        [
          {
            "node": "Dados Webhook",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Analisa imagem - Triagem": {
      "main": [
        [
          {
            "node": "If",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If": {
      "main": [
        [
          {
            "node": "URL",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Trata imagem",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "URL": {
      "main": [
        [
          {
            "node": "Campos Whatsapp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trata imagem": {
      "main": [
        [
          {
            "node": "Campos Whatsapp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model": {
      "ai_languageModel": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory": {
      "ai_memory": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "obras": {
      "ai_tool": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "fornecedor": {
      "ai_tool": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "tipo_doc": {
      "ai_tool": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "get_lançamentos": {
      "ai_tool": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "agente_lancamento": {
      "main": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GET fornecedor": {
      "main": [
        [
          {
            "node": "Microsoft SQL7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Microsoft SQL4": {
      "main": [
        [
          {
            "node": "Respond to Webhook3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GET conta bancária1": {
      "main": [
        [
          {
            "node": "Microsoft SQL4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GET tipo_doc": {
      "main": [
        [
          {
            "node": "Microsoft SQL5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Microsoft SQL5": {
      "main": [
        [
          {
            "node": "Respond to Webhook8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Microsoft SQL6": {
      "main": [
        [
          {
            "node": "Respond to Webhook5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Microsoft SQL7": {
      "main": [
        [
          {
            "node": "Respond to Webhook7",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GET centro_custo": {
      "main": [
        [
          {
            "node": "Microsoft SQL6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "centro_custo": {
      "ai_tool": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "GET empresas/matrizes": {
      "main": [
        [
          {
            "node": "Limit",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "agente_dia_a_dia1": {
      "main": [
        [
          {
            "node": "Dia a dia",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "OpenAI Chat Model2": {
      "ai_languageModel": [
        [
          {
            "node": "Dia a dia",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Postgres Chat Memory1": {
      "ai_memory": [
        [
          {
            "node": "Dia a dia",
            "type": "ai_memory",
            "index": 0
          }
        ]
      ]
    },
    "obras2": {
      "ai_tool": [
        [
          {
            "node": "Dia a dia",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request": {
      "main": [
        [
          {
            "node": "Edit Fields1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "HTTP Request1": {
      "main": [
        [
          {
            "node": "Respond to Webhook11",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "editar dia a dia1": {
      "main": [
        [
          {
            "node": "HTTP Request1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "criar dia a dia1": {
      "main": [
        [
          {
            "node": "HTTP Request",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "adicionar anexo1": {
      "main": [
        [
          {
            "node": "baixar",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "baixar": {
      "main": [
        [
          {
            "node": "enviar",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "enviar": {
      "main": [
        [
          {
            "node": "Respond to Webhook12",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "GET fase serviço": {
      "main": [
        [
          {
            "node": "Microsoft SQL8",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Edit Fields1": {
      "main": [
        [
          {
            "node": "Respond to Webhook10",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "criar pré-lançamento": {
      "main": [
        [
          {
            "node": "post",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "editar pré-lançamento": {
      "main": [
        [
          {
            "node": "put2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "anexar imagem": {
      "main": [
        [
          {
            "node": "baixar imagem",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "baixar imagem": {
      "main": [
        [
          {
            "node": "enviar imagem",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "enviar imagem": {
      "main": [
        [
          {
            "node": "Respond to Webhook15",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "anexar imagem1": {
      "ai_tool": [
        [
          {
            "node": "Solicitação de compras",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "Analisa documento": {
      "main": [
        [
          {
            "node": "If1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "If1": {
      "main": [
        [
          {
            "node": "URL1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "Trata documento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "URL1": {
      "main": [
        [
          {
            "node": "Campos Whatsapp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Trata documento": {
      "main": [
        [
          {
            "node": "Campos Whatsapp",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Interface": {
      "main": [
        [
          {
            "node": "Verifica sessão atual e cria se não houver",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "agente_pre_lancamento": {
      "main": [
        [
          {
            "node": "Formata resposta",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "agente_solicitação1": {
      "main": [
        [
          {
            "node": "Formata resposta",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "agente_dia_a_dia": {
      "main": [
        [
          {
            "node": "Formata resposta",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Retorno ao usuário": {
      "main": [
        []
      ]
    },
    "Encaminha ao agente": {
      "main": [
        [
          {
            "node": "agente_pre_lancamento",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "agente_solicitação1",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "agente_dia_a_dia",
            "type": "main",
            "index": 0
          }
        ],
        [
          {
            "node": "mensagem de esclarecimento",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Verifica sessão atual e cria se não houver": {
      "main": [
        [
          {
            "node": "Roteador",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Chat1": {
      "ai_languageModel": [
        [
          {
            "node": "Roteador",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "Roteador": {
      "main": [
        [
          {
            "node": "output x msg usuário",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "output x msg usuário": {
      "main": [
        [
          {
            "node": "Encaminha ao agente",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Formata resposta": {
      "main": [
        [
          {
            "node": "Retorno ao usuário",
            "type": "main",
            "index": 0
          },
          {
            "node": "Atualiza sessão",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "mensagem de esclarecimento": {
      "main": [
        [
          {
            "node": "Retorno ao usuário",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Solicitação de compras": {
      "main": [
        [
          {
            "node": "Respond to Webhook4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Pré-lançamento financeiro": {
      "main": [
        [
          {
            "node": "Respond to Webhook1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Dia a dia": {
      "main": [
        [
          {
            "node": "Respond to Webhook6",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "excluir imagem": {
      "main": [
        [
          {
            "node": "delete",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "delete": {
      "main": [
        [
          {
            "node": "Respond to Webhook16",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "delete1": {
      "main": [
        [
          {
            "node": "Respond to Webhook17",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "deletar item": {
      "main": [
        [
          {
            "node": "delete1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "listar itens de uma solicitação": {
      "main": [
        [
          {
            "node": "get3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "delete2": {
      "main": [
        [
          {
            "node": "Respond to Webhook19",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "deletar solicitação": {
      "main": [
        [
          {
            "node": "delete2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "editar solicitação": {
      "main": [
        [
          {
            "node": "put",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "put": {
      "main": [
        [
          {
            "node": "Respond to Webhook20",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "put1": {
      "main": [
        [
          {
            "node": "Respond to Webhook21",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "editar item de uma solicitação": {
      "main": [
        [
          {
            "node": "put1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get1": {
      "main": [
        [
          {
            "node": "Respond to Webhook22",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get2": {
      "main": [
        [
          {
            "node": "Respond to Webhook23",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "buscar anexos de uma solicitação": {
      "main": [
        [
          {
            "node": "get2",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "delete3": {
      "main": [
        [
          {
            "node": "Respond to Webhook24",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "deletar pré-lançamento": {
      "main": [
        [
          {
            "node": "delete3",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "put2": {
      "main": [
        [
          {
            "node": "Respond to Webhook14",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "post": {
      "main": [
        [
          {
            "node": "Respond to Webhook9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "deletar_pré_lançamento1": {
      "ai_tool": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "get3": {
      "main": [
        [
          {
            "node": "Respond to Webhook18",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "consultar situação das solicitações": {
      "main": [
        [
          {
            "node": "get1",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "criar_pre_lancamento": {
      "ai_tool": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "editar_pre_lançamento": {
      "ai_tool": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "conta_bancaria": {
      "ai_tool": [
        [
          {
            "node": "Pré-lançamento financeiro",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "fase_servico": {
      "ai_tool": [
        [
          {
            "node": "Dia a dia",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "buscar_dia_a_dia": {
      "ai_tool": [
        [
          {
            "node": "Dia a dia",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "criar_dia_a_dia": {
      "ai_tool": [
        [
          {
            "node": "Dia a dia",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "editar_dia_a_dia": {
      "ai_tool": [
        [
          {
            "node": "Dia a dia",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "deletar_dia_a_dia": {
      "ai_tool": [
        [
          {
            "node": "Dia a dia",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "buscar_anexos": {
      "ai_tool": [
        [
          {
            "node": "Dia a dia",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "adicionar_anexo": {
      "ai_tool": [
        [
          {
            "node": "Dia a dia",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "deletar_anexo1": {
      "ai_tool": [
        [
          {
            "node": "Dia a dia",
            "type": "ai_tool",
            "index": 0
          }
        ]
      ]
    },
    "get": {
      "main": [
        [
          {
            "node": "Respond to Webhook25",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "listar dia a dia": {
      "main": [
        [
          {
            "node": "get",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "delete4": {
      "main": [
        [
          {
            "node": "Respond to Webhook26",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "deletar dia a dia": {
      "main": [
        [
          {
            "node": "delete4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "get4": {
      "main": [
        [
          {
            "node": "Respond to Webhook27",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "listar dia a dia1": {
      "main": [
        [
          {
            "node": "get4",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "delete5": {
      "main": [
        [
          {
            "node": "Respond to Webhook28",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "deletar anexo dia a dia": {
      "main": [
        [
          {
            "node": "delete5",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Microsoft SQL8": {
      "main": [
        [
          {
            "node": "Microsoft SQL9",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "Microsoft SQL9": {
      "main": [
        [
          {
            "node": "Respond to Webhook13",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": true,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "8c2aec6a-3af7-46fa-93cf-e796ca37b8bd",
  "meta": {
    "templateCredsSetupCompleted": true,
    "instanceId": "333f7fdede98953d71017ef2e0ac27e5543ae79f7724abd686718654a6707bfd"
  },
  "id": "k7FX7P7EcZsbhVI4",
  "tags": [
    {
      "updatedAt": "2026-01-29T20:46:07.786Z",
      "createdAt": "2026-01-29T20:46:07.786Z",
      "id": "etu0JyHwzhQXtLha",
      "name": "Obra Prima"
    }
  ]
}